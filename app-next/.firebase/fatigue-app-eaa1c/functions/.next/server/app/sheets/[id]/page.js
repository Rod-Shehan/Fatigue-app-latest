(()=>{var e={};e.id=449,e.ids=[449],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},51607:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,originalPathname:()=>h,pages:()=>d,routeModule:()=>m,tree:()=>u}),r(36087),r(13647),r(35866);var i=r(23191),s=r(88716),n=r(37922),a=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u=["",{children:["sheets",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,36087)),"C:\\Users\\r_she\\Documents\\Fatigue app\\app-next\\src\\app\\sheets\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13647)),"C:\\Users\\r_she\\Documents\\Fatigue app\\app-next\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\r_she\\Documents\\Fatigue app\\app-next\\src\\app\\sheets\\[id]\\page.tsx"],h="/sheets/[id]/page",c={require:r,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/sheets/[id]/page",pathname:"/sheets/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},18166:(e,t,r)=>{Promise.resolve().then(r.bind(r,84167))},84167:(e,t,r)=>{"use strict";let i;r.d(t,{SheetDetail:()=>oC});var s,n,a=r(10326),o=r(17577),l=r.n(o),u=r(44976),d=r(20108),h=r(10119),c=r(90434),m=r(18069),p=r(18775),f=r(91664),g=r(79360),x=r(51223);let y=(0,g.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function v({className:e,variant:t,...r}){return a.jsx("div",{className:(0,x.cn)(y({variant:t}),e),...r})}var b=r(82561),w=r(48051),k=r(93095),j=r(88957),T=r(52067),N=r(99827),S=r(79223),M=r(65276),P=r(65819),D=e=>{let{present:t,children:r}=e,i=function(e){var t,r;let[i,s]=o.useState(),n=o.useRef(null),a=o.useRef(e),l=o.useRef("none"),[u,d]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},o.useReducer((e,t)=>r[e][t]??e,t));return o.useEffect(()=>{let e=A(n.current);l.current="mounted"===u?e:"none"},[u]),(0,P.b)(()=>{let t=n.current,r=a.current;if(r!==e){let i=l.current,s=A(t);e?d("MOUNT"):"none"===s||t?.display==="none"?d("UNMOUNT"):r&&i!==s?d("ANIMATION_OUT"):d("UNMOUNT"),a.current=e}},[e,d]),(0,P.b)(()=>{if(i){let e;let t=i.ownerDocument.defaultView??window,r=r=>{let s=A(n.current).includes(CSS.escape(r.animationName));if(r.target===i&&s&&(d("ANIMATION_END"),!a.current)){let r=i.style.animationFillMode;i.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===i.style.animationFillMode&&(i.style.animationFillMode=r)})}},s=e=>{e.target===i&&(l.current=A(n.current))};return i.addEventListener("animationstart",s),i.addEventListener("animationcancel",r),i.addEventListener("animationend",r),()=>{t.clearTimeout(e),i.removeEventListener("animationstart",s),i.removeEventListener("animationcancel",r),i.removeEventListener("animationend",r)}}d("ANIMATION_END")},[i,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:o.useCallback(e=>{n.current=e?getComputedStyle(e):null,s(e)},[])}}(t),s="function"==typeof r?r({present:i.isPresent}):o.Children.only(r),n=(0,w.e)(i.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(s));return"function"==typeof r||i.isPresent?o.cloneElement(s,{ref:n}):null};function A(e){return e?.animationName||"none"}function C(e){let t=function(e){let t=o.forwardRef((e,t)=>{let{children:r,...i}=e;if(o.isValidElement(r)){let e,s;let n=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,a=function(e,t){let r={...t};for(let i in t){let s=e[i],n=t[i];/^on[A-Z]/.test(i)?s&&n?r[i]=(...e)=>{let t=n(...e);return s(...e),t}:s&&(r[i]=s):"style"===i?r[i]={...s,...n}:"className"===i&&(r[i]=[s,n].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props);return r.type!==o.Fragment&&(a.ref=t?(0,w.F)(t,n):n),o.cloneElement(r,a)}return o.Children.count(r)>1?o.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=o.forwardRef((e,r)=>{let{children:i,...s}=e,n=o.Children.toArray(i),l=n.find(_);if(l){let e=l.props.children,i=n.map(t=>t!==l?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...s,ref:r,children:o.isValidElement(e)?o.cloneElement(e,void 0,i):null})}return(0,a.jsx)(t,{...s,ref:r,children:i})});return r.displayName=`${e}.Slot`,r}D.displayName="Presence",r(60962);var E=Symbol("radix.slottable");function _(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===E}var R=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=C(`Primitive.${t}`),i=o.forwardRef((e,i)=>{let{asChild:s,...n}=e,o=s?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o,{...n,ref:i})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),V=r(80699),L=r(58260),F=r(35664),B="Dialog",[O,I]=(0,k.b)(B),[$,U]=O(B),W=e=>{let{__scopeDialog:t,children:r,open:i,defaultOpen:s,onOpenChange:n,modal:l=!0}=e,u=o.useRef(null),d=o.useRef(null),[h,c]=(0,T.T)({prop:i,defaultProp:s??!1,onChange:n,caller:B});return(0,a.jsx)($,{scope:t,triggerRef:u,contentRef:d,contentId:(0,j.M)(),titleId:(0,j.M)(),descriptionId:(0,j.M)(),open:h,onOpenChange:c,onOpenToggle:o.useCallback(()=>c(e=>!e),[c]),modal:l,children:r})};W.displayName=B;var z="DialogTrigger";o.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,s=U(z,r),n=(0,w.e)(t,s.triggerRef);return(0,a.jsx)(R.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ed(s.open),...i,ref:n,onClick:(0,b.Mj)(e.onClick,s.onOpenToggle)})}).displayName=z;var q="DialogPortal",[Z,K]=O(q,{forceMount:void 0}),H=e=>{let{__scopeDialog:t,forceMount:r,children:i,container:s}=e,n=U(q,t);return(0,a.jsx)(Z,{scope:t,forceMount:r,children:o.Children.map(i,e=>(0,a.jsx)(D,{present:r||n.open,children:(0,a.jsx)(M.h,{asChild:!0,container:s,children:e})}))})};H.displayName=q;var Y="DialogOverlay",X=o.forwardRef((e,t)=>{let r=K(Y,e.__scopeDialog),{forceMount:i=r.forceMount,...s}=e,n=U(Y,e.__scopeDialog);return n.modal?(0,a.jsx)(D,{present:i||n.open,children:(0,a.jsx)(Q,{...s,ref:t})}):null});X.displayName=Y;var G=C("DialogOverlay.RemoveScroll"),Q=o.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,s=U(Y,r);return(0,a.jsx)(L.Z,{as:G,allowPinchZoom:!0,shards:[s.contentRef],children:(0,a.jsx)(R.div,{"data-state":ed(s.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),J="DialogContent",ee=o.forwardRef((e,t)=>{let r=K(J,e.__scopeDialog),{forceMount:i=r.forceMount,...s}=e,n=U(J,e.__scopeDialog);return(0,a.jsx)(D,{present:i||n.open,children:n.modal?(0,a.jsx)(et,{...s,ref:t}):(0,a.jsx)(er,{...s,ref:t})})});ee.displayName=J;var et=o.forwardRef((e,t)=>{let r=U(J,e.__scopeDialog),i=o.useRef(null),s=(0,w.e)(t,r.contentRef,i);return o.useEffect(()=>{let e=i.current;if(e)return(0,F.Ry)(e)},[]),(0,a.jsx)(ei,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,b.Mj)(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:(0,b.Mj)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,b.Mj)(e.onFocusOutside,e=>e.preventDefault())})}),er=o.forwardRef((e,t)=>{let r=U(J,e.__scopeDialog),i=o.useRef(!1),s=o.useRef(!1);return(0,a.jsx)(ei,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(i.current||r.triggerRef.current?.focus(),t.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(i.current=!0,"pointerdown"!==t.detail.originalEvent.type||(s.current=!0));let n=t.target;r.triggerRef.current?.contains(n)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),ei=o.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:n,...l}=e,u=U(J,r),d=o.useRef(null),h=(0,w.e)(t,d);return(0,V.EW)(),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.M,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:n,children:(0,a.jsx)(N.XB,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":ed(u.open),...l,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ep,{titleId:u.titleId}),(0,a.jsx)(ef,{contentRef:d,descriptionId:u.descriptionId})]})]})}),es="DialogTitle",en=o.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,s=U(es,r);return(0,a.jsx)(R.h2,{id:s.titleId,...i,ref:t})});en.displayName=es;var ea="DialogDescription",eo=o.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,s=U(ea,r);return(0,a.jsx)(R.p,{id:s.descriptionId,...i,ref:t})});eo.displayName=ea;var el="DialogClose",eu=o.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,s=U(el,r);return(0,a.jsx)(R.button,{type:"button",...i,ref:t,onClick:(0,b.Mj)(e.onClick,()=>s.onOpenChange(!1))})});function ed(e){return e?"open":"closed"}eu.displayName=el;var eh="DialogTitleWarning",[ec,em]=(0,k.k)(eh,{contentName:J,titleName:es,docsSlug:"dialog"}),ep=({titleId:e})=>{let t=em(eh),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return o.useEffect(()=>{e&&!document.getElementById(e)&&console.error(r)},[r,e]),null},ef=({contentRef:e,descriptionId:t})=>{let r=em("DialogDescriptionWarning"),i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return o.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&!document.getElementById(t)&&console.warn(i)},[i,e,t]),null},eg=r(9664);let ex=(0,eg.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ey=o.forwardRef(({className:e,...t},r)=>a.jsx(X,{ref:r,className:(0,x.cn)("fixed inset-0 z-50 bg-black/80",e),...t}));ey.displayName=X.displayName;let ev=o.forwardRef(({className:e,children:t,...r},i)=>(0,a.jsxs)(H,{children:[a.jsx(ey,{}),(0,a.jsxs)(ee,{ref:i,className:(0,x.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 p-6 shadow-lg sm:rounded-lg",e),...r,children:[t,(0,a.jsxs)(eu,{className:"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100",children:[a.jsx(ex,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ev.displayName=ee.displayName;let eb=({className:e,...t})=>a.jsx("div",{className:(0,x.cn)("flex flex-col space-y-1.5 text-left",e),...t}),ew=o.forwardRef(({className:e,...t},r)=>a.jsx(en,{ref:r,className:(0,x.cn)("text-lg font-semibold",e),...t})),ek=o.forwardRef(({className:e,...t},r)=>a.jsx(eo,{ref:r,className:(0,x.cn)("text-sm text-slate-500",e),...t}));var ej=r(41190),eT=r(44794),eN=r(46721),eS=r(43022),eM=r(22032);let eP=(0,eg.Z)("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);var eD=r(85131),eA=r(96451),eC=r(14711);let eE=(0,eg.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),e_=(0,eg.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var eR=r(63144);function eV(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}let eL=e=>Array.isArray(e);function eF(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}function eB(e){return"string"==typeof e||Array.isArray(e)}function eO(e){let t=[{},{}];return null==e||e.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function eI(e,t,r,i){if("function"==typeof t){let[s,n]=eO(i);t=t(void 0!==r?r:e.custom,s,n)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[s,n]=eO(i);t=t(void 0!==r?r:e.custom,s,n)}return t}function e$(e,t,r){let i=e.getProps();return eI(i,t,void 0!==r?r:i.custom,e)}let eU=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eW=["initial",...eU];function ez(e){let t;return()=>(void 0===t&&(t=e()),t)}let eq=ez(()=>void 0!==window.ScrollTimeline);class eZ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){let r=this.animations.map(r=>eq()&&r.attachTimeline?r.attachTimeline(e):"function"==typeof t?t(r):void 0);return()=>{r.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class eK extends eZ{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function eH(e,t){return e?e[t]||e.default||e:void 0}function eY(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}function eX(e){return"function"==typeof e}function eG(e,t){e.timeline=t,e.onfinish=null}let eQ=e=>Array.isArray(e)&&"number"==typeof e[0],eJ={linearEasing:void 0},e0=function(e,t){let r=ez(e);return()=>{var e;return null!==(e=eJ[t])&&void 0!==e?e:r()}}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),e1=(e,t,r)=>{let i=t-e;return 0===i?1:(r-e)/i},e2=(e,t,r=10)=>{let i="",s=Math.max(Math.round(t/r),2);for(let t=0;t<s;t++)i+=e(e1(0,s-1,t))+", ";return`linear(${i.substring(0,i.length-2)})`},e4=([e,t,r,i])=>`cubic-bezier(${e}, ${t}, ${r}, ${i})`,e5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:e4([0,.65,.55,1]),circOut:e4([.55,0,1,.45]),backIn:e4([.31,.01,.66,-.59]),backOut:e4([.33,1.53,.69,.99])},e3={x:!1,y:!1};function e6(e,t){let r=function(e,t,r){if(e instanceof Element)return[e];if("string"==typeof e){let t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}(e),i=new AbortController;return[r,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function e8(e){return t=>{"touch"===t.pointerType||e3.x||e3.y||e(t)}}let e9=(e,t)=>!!t&&(e===t||e9(e,t.parentElement)),e7=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,te=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),tt=new WeakSet;function tr(e){return t=>{"Enter"===t.key&&e(t)}}function ti(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}let ts=(e,t)=>{let r=e.currentTarget;if(!r)return;let i=tr(()=>{if(tt.has(r))return;ti(r,"down");let e=tr(()=>{ti(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>ti(r,"cancel"),t)});r.addEventListener("keydown",i,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",i),t)};function tn(e){return e7(e)&&!(e3.x||e3.y)}let ta=e=>1e3*e,to=e=>e/1e3,tl=e=>e,tu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],td=new Set(tu),th=new Set(["width","height","top","left","right","bottom",...tu]),tc=e=>!!(e&&"object"==typeof e&&e.mix&&e.toValue),tm=e=>eL(e)?e[e.length-1]||0:e,tp={skipAnimations:!1,useManualTiming:!1},tf=["read","resolveKeyframes","update","preRender","render","postRender"];function tg(e,t){let r=!1,i=!0,s={delta:0,timestamp:0,isProcessing:!1},n=()=>r=!0,a=tf.reduce((e,t)=>(e[t]=function(e){let t=new Set,r=new Set,i=!1,s=!1,n=new WeakSet,a={delta:0,timestamp:0,isProcessing:!1};function o(t){n.has(t)&&(l.schedule(t),e()),t(a)}let l={schedule:(e,s=!1,a=!1)=>{let o=a&&i?t:r;return s&&n.add(e),o.has(e)||o.add(e),e},cancel:e=>{r.delete(e),n.delete(e)},process:e=>{if(a=e,i){s=!0;return}i=!0,[t,r]=[r,t],t.forEach(o),t.clear(),i=!1,s&&(s=!1,l.process(e))}};return l}(n),e),{}),{read:o,resolveKeyframes:l,update:u,preRender:d,render:h,postRender:c}=a,m=()=>{let n=tp.useManualTiming?s.timestamp:performance.now();r=!1,s.delta=i?1e3/60:Math.max(Math.min(n-s.timestamp,40),1),s.timestamp=n,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),d.process(s),h.process(s),c.process(s),s.isProcessing=!1,r&&t&&(i=!1,e(m))},p=()=>{r=!0,i=!0,s.isProcessing||e(m)};return{schedule:tf.reduce((e,t)=>{let i=a[t];return e[t]=(e,t=!1,s=!1)=>(r||p(),i.schedule(e,t,s)),e},{}),cancel:e=>{for(let t=0;t<tf.length;t++)a[tf[t]].cancel(e)},state:s,steps:a}}let{schedule:tx,cancel:ty,state:tv,steps:tb}=tg("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:tl,!0);function tw(){i=void 0}let tk={now:()=>(void 0===i&&tk.set(tv.isProcessing||tp.useManualTiming?tv.timestamp:performance.now()),i),set:e=>{i=e,queueMicrotask(tw)}};function tj(e,t){-1===e.indexOf(t)&&e.push(t)}function tT(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class tN{constructor(){this.subscriptions=[]}add(e){return tj(this.subscriptions,e),()=>tT(this.subscriptions,e)}notify(e,t,r){let i=this.subscriptions.length;if(i){if(1===i)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){let i=this.subscriptions[s];i&&i(e,t,r)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let tS=e=>!isNaN(parseFloat(e)),tM={current:void 0};class tP{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{let r=tk.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=tk.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=tS(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new tN);let r=this.events[e].add(t);return"change"===e?()=>{r(),tx.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return tM.current&&tM.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=tk.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let r=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),r?1e3/r*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tD(e,t){return new tP(e,t)}let tA=e=>!!(e&&e.getVelocity);function tC(e,t){let r=e.getValue("willChange");if(tA(r)&&r.add)return r.add(t)}let tE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),t_="data-"+tE("framerAppearId"),tR={current:!1},tV=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function tL(e,t,r,i){if(e===t&&r===i)return tl;let s=t=>(function(e,t,r,i,s){let n,a;let o=0;do(n=tV(a=t+(r-t)/2,i,s)-e)>0?r=a:t=a;while(Math.abs(n)>1e-7&&++o<12);return a})(t,0,1,e,r);return e=>0===e||1===e?e:tV(s(e),t,i)}let tF=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,tB=e=>t=>1-e(1-t),tO=tL(.33,1.53,.69,.99),tI=tB(tO),t$=tF(tI),tU=e=>(e*=2)<1?.5*tI(e):.5*(2-Math.pow(2,-10*(e-1))),tW=e=>1-Math.sin(Math.acos(e)),tz=tB(tW),tq=tF(tW),tZ=e=>/^0[^.\s]+$/u.test(e),tK=(e,t,r)=>r>t?t:r<e?e:r,tH={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},tY={...tH,transform:e=>tK(0,1,e)},tX={...tH,default:1},tG=e=>Math.round(1e5*e)/1e5,tQ=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,tJ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,t0=(e,t)=>r=>!!("string"==typeof r&&tJ.test(r)&&r.startsWith(e)||t&&null!=r&&Object.prototype.hasOwnProperty.call(r,t)),t1=(e,t,r)=>i=>{if("string"!=typeof i)return i;let[s,n,a,o]=i.match(tQ);return{[e]:parseFloat(s),[t]:parseFloat(n),[r]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},t2=e=>tK(0,255,e),t4={...tH,transform:e=>Math.round(t2(e))},t5={test:t0("rgb","red"),parse:t1("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:i=1})=>"rgba("+t4.transform(e)+", "+t4.transform(t)+", "+t4.transform(r)+", "+tG(tY.transform(i))+")"},t3={test:t0("#"),parse:function(e){let t="",r="",i="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}},transform:t5.transform},t6=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),t8=t6("deg"),t9=t6("%"),t7=t6("px"),re=t6("vh"),rt=t6("vw"),rr={...t9,parse:e=>t9.parse(e)/100,transform:e=>t9.transform(100*e)},ri={test:t0("hsl","hue"),parse:t1("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:i=1})=>"hsla("+Math.round(e)+", "+t9.transform(tG(t))+", "+t9.transform(tG(r))+", "+tG(tY.transform(i))+")"},rs={test:e=>t5.test(e)||t3.test(e)||ri.test(e),parse:e=>t5.test(e)?t5.parse(e):ri.test(e)?ri.parse(e):t3.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?t5.transform(e):ri.transform(e)},rn=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,ra="number",ro="color",rl=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ru(e){let t=e.toString(),r=[],i={color:[],number:[],var:[]},s=[],n=0,a=t.replace(rl,e=>(rs.test(e)?(i.color.push(n),s.push(ro),r.push(rs.parse(e))):e.startsWith("var(")?(i.var.push(n),s.push("var"),r.push(e)):(i.number.push(n),s.push(ra),r.push(parseFloat(e))),++n,"${}")).split("${}");return{values:r,split:a,indexes:i,types:s}}function rd(e){return ru(e).values}function rh(e){let{split:t,types:r}=ru(e),i=t.length;return e=>{let s="";for(let n=0;n<i;n++)if(s+=t[n],void 0!==e[n]){let t=r[n];t===ra?s+=tG(e[n]):t===ro?s+=rs.transform(e[n]):s+=e[n]}return s}}let rc=e=>"number"==typeof e?0:e,rm={test:function(e){var t,r;return isNaN(e)&&"string"==typeof e&&((null===(t=e.match(tQ))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(rn))||void 0===r?void 0:r.length)||0)>0},parse:rd,createTransformer:rh,getAnimatableNone:function(e){let t=rd(e);return rh(e)(t.map(rc))}},rp=new Set(["brightness","contrast","saturate","opacity"]);function rf(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[i]=r.match(tQ)||[];if(!i)return e;let s=r.replace(i,""),n=rp.has(t)?1:0;return i!==r&&(n*=100),t+"("+n+s+")"}let rg=/\b([a-z-]*)\(.*?\)/gu,rx={...rm,getAnimatableNone:e=>{let t=e.match(rg);return t?t.map(rf).join(" "):e}},ry={...tH,transform:Math.round},rv={borderWidth:t7,borderTopWidth:t7,borderRightWidth:t7,borderBottomWidth:t7,borderLeftWidth:t7,borderRadius:t7,radius:t7,borderTopLeftRadius:t7,borderTopRightRadius:t7,borderBottomRightRadius:t7,borderBottomLeftRadius:t7,width:t7,maxWidth:t7,height:t7,maxHeight:t7,top:t7,right:t7,bottom:t7,left:t7,padding:t7,paddingTop:t7,paddingRight:t7,paddingBottom:t7,paddingLeft:t7,margin:t7,marginTop:t7,marginRight:t7,marginBottom:t7,marginLeft:t7,backgroundPositionX:t7,backgroundPositionY:t7,rotate:t8,rotateX:t8,rotateY:t8,rotateZ:t8,scale:tX,scaleX:tX,scaleY:tX,scaleZ:tX,skew:t8,skewX:t8,skewY:t8,distance:t7,translateX:t7,translateY:t7,translateZ:t7,x:t7,y:t7,z:t7,perspective:t7,transformPerspective:t7,opacity:tY,originX:rr,originY:rr,originZ:t7,zIndex:ry,size:t7,fillOpacity:tY,strokeOpacity:tY,numOctaves:ry},rb={...rv,color:rs,backgroundColor:rs,outlineColor:rs,fill:rs,stroke:rs,borderColor:rs,borderTopColor:rs,borderRightColor:rs,borderBottomColor:rs,borderLeftColor:rs,filter:rx,WebkitFilter:rx},rw=e=>rb[e];function rk(e,t){let r=rw(e);return r!==rx&&(r=rm),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let rj=new Set(["auto","none","0"]),rT=e=>e===tH||e===t7,rN=(e,t)=>parseFloat(e.split(", ")[t]),rS=(e,t)=>(r,{transform:i})=>{if("none"===i||!i)return 0;let s=i.match(/^matrix3d\((.+)\)$/u);if(s)return rN(s[1],t);{let t=i.match(/^matrix\((.+)\)$/u);return t?rN(t[1],e):0}},rM=new Set(["x","y","z"]),rP=tu.filter(e=>!rM.has(e)),rD={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:rS(4,13),y:rS(5,14)};rD.translateX=rD.x,rD.translateY=rD.y;let rA=new Set,rC=!1,rE=!1;function r_(){if(rE){let e=Array.from(rA).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{let t=function(e){let t=[];return rP.forEach(r=>{let i=e.getValue(r);void 0!==i&&(t.push([r,i.get()]),i.set(r.startsWith("scale")?1:0))}),t}(e);t.length&&(r.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=r.get(e);t&&t.forEach(([t,r])=>{var i;null===(i=e.getValue(t))||void 0===i||i.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}rE=!1,rC=!1,rA.forEach(e=>e.complete()),rA.clear()}function rR(){rA.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(rE=!0)})}class rV{constructor(e,t,r,i,s,n=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=n}scheduleResolve(){this.isScheduled=!0,this.isAsync?(rA.add(this),rC||(rC=!0,tx.read(rR),tx.resolveKeyframes(r_))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(null===e[s]){if(0===s){let s=null==i?void 0:i.get(),n=e[e.length-1];if(void 0!==s)e[0]=s;else if(r&&t){let i=r.readValue(t,n);null!=i&&(e[0]=i)}void 0===e[0]&&(e[0]=n),i&&void 0===s&&i.set(e[0])}else e[s]=e[s-1]}}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),rA.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,rA.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let rL=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),rF=e=>t=>"string"==typeof t&&t.startsWith(e),rB=rF("--"),rO=rF("var(--"),rI=e=>!!rO(e)&&r$.test(e.split("/*")[0].trim()),r$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,rW=e=>t=>t.test(e),rz=[tH,t7,t9,t8,rt,re,{test:e=>"auto"===e,parse:e=>e}],rq=e=>rz.find(rW(e));class rZ extends rV{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let r=0;r<e.length;r++){let i=e[r];if("string"==typeof i&&rI(i=i.trim())){let s=function e(t,r,i=1){tl(i<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);let[s,n]=function(e){let t=rU.exec(e);if(!t)return[,];let[,r,i,s]=t;return[`--${null!=r?r:i}`,s]}(t);if(!s)return;let a=window.getComputedStyle(r).getPropertyValue(s);if(a){let e=a.trim();return rL(e)?parseFloat(e):e}return rI(n)?e(n,r,i+1):n}(i,t.current);void 0!==s&&(e[r]=s),r===e.length-1&&(this.finalKeyframe=i)}}if(this.resolveNoneKeyframes(),!th.has(r)||2!==e.length)return;let[i,s]=e,n=rq(i),a=rq(s);if(n!==a){if(rT(n)&&rT(a))for(let t=0;t<e.length;t++){let r=e[t];"string"==typeof r&&(e[t]=parseFloat(r))}else this.needsMeasurement=!0}}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,r=[];for(let t=0;t<e.length;t++){var i;("number"==typeof(i=e[t])?0===i:null===i||"none"===i||"0"===i||tZ(i))&&r.push(t)}r.length&&function(e,t,r){let i,s=0;for(;s<e.length&&!i;){let t=e[s];"string"==typeof t&&!rj.has(t)&&ru(t).values.length&&(i=e[s]),s++}if(i&&r)for(let s of t)e[s]=rk(r,i)}(e,r,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rD[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let i=t[t.length-1];void 0!==i&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;let{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;let s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);let n=i.length-1,a=i[n];i[n]=rD[r](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach(([e,r])=>{t.getValue(e).set(r)}),this.resolveNoneKeyframes()}}let rK=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(rm.test(e)||"0"===e)&&!e.startsWith("url(")),rH=e=>null!==e;function rY(e,{repeat:t,repeatType:r="loop"},i){let s=e.filter(rH),n=t&&"loop"!==r&&t%2==1?0:s.length-1;return n&&void 0!==i?i:s[n]}class rX{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:n="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=tk.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:n,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(rR(),r_()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=tk.now(),this.hasAttemptedResolve=!0;let{name:r,type:i,velocity:s,delay:n,onComplete:a,onUpdate:o,isGenerator:l}=this.options;if(!l&&!function(e,t,r,i){let s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;let n=e[e.length-1],a=rK(s,t),o=rK(n,t);return tl(a===o,`You are trying to animate ${t} from "${s}" to "${n}". ${s} is not an animatable value - to enable this animation set ${s} to a value animatable to ${n} via the \`style\` property.`),!!a&&!!o&&(function(e){let t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||eX(r))&&i)}(e,r,i,s)){if(tR.current||!n){o&&o(rY(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}this.options.duration=0}let u=this.initPlayback(e,t);!1!==u&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}let rG=(e,t,r)=>e+(t-e)*r;function rQ(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function rJ(e,t){return r=>r>0?t:e}let r0=(e,t,r)=>{let i=e*e,s=r*(t*t-i)+i;return s<0?0:Math.sqrt(s)},r1=[t3,t5,ri],r2=e=>r1.find(t=>t.test(e));function r4(e){let t=r2(e);if(tl(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`),!t)return!1;let r=t.parse(e);return t===ri&&(r=function({hue:e,saturation:t,lightness:r,alpha:i}){e/=360,r/=100;let s=0,n=0,a=0;if(t/=100){let i=r<.5?r*(1+t):r+t-r*t,o=2*r-i;s=rQ(o,i,e+1/3),n=rQ(o,i,e),a=rQ(o,i,e-1/3)}else s=n=a=r;return{red:Math.round(255*s),green:Math.round(255*n),blue:Math.round(255*a),alpha:i}}(r)),r}let r5=(e,t)=>{let r=r4(e),i=r4(t);if(!r||!i)return rJ(e,t);let s={...r};return e=>(s.red=r0(r.red,i.red,e),s.green=r0(r.green,i.green,e),s.blue=r0(r.blue,i.blue,e),s.alpha=rG(r.alpha,i.alpha,e),t5.transform(s))},r3=(e,t)=>r=>t(e(r)),r6=(...e)=>e.reduce(r3),r8=new Set(["none","hidden"]);function r9(e,t){return r=>rG(e,t,r)}function r7(e){return"number"==typeof e?r9:"string"==typeof e?rI(e)?rJ:rs.test(e)?r5:ir:Array.isArray(e)?ie:"object"==typeof e?rs.test(e)?r5:it:rJ}function ie(e,t){let r=[...e],i=r.length,s=e.map((e,r)=>r7(e)(e,t[r]));return e=>{for(let t=0;t<i;t++)r[t]=s[t](e);return r}}function it(e,t){let r={...e,...t},i={};for(let s in r)void 0!==e[s]&&void 0!==t[s]&&(i[s]=r7(e[s])(e[s],t[s]));return e=>{for(let t in i)r[t]=i[t](e);return r}}let ir=(e,t)=>{let r=rm.createTransformer(t),i=ru(e),s=ru(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?r8.has(e)&&!s.values.length||r8.has(t)&&!i.values.length?function(e,t){return r8.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}(e,t):r6(ie(function(e,t){var r;let i=[],s={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){let a=t.types[n],o=e.indexes[a][s[a]],l=null!==(r=e.values[o])&&void 0!==r?r:0;i[n]=l,s[a]++}return i}(i,s),s.values),r):(tl(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),rJ(e,t))};function ii(e,t,r){return"number"==typeof e&&"number"==typeof t&&"number"==typeof r?rG(e,t,r):r7(e)(e,t)}function is(e,t,r){var i,s;let n=Math.max(t-5,0);return i=r-e(n),(s=t-n)?1e3/s*i:0}let ia={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1};function io(e,t){return e*Math.sqrt(1-t*t)}let il=["duration","bounce"],iu=["stiffness","damping","mass"];function id(e,t){return t.some(t=>void 0!==e[t])}function ih(e=ia.visualDuration,t=ia.bounce){let r;let i="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:s,restDelta:n}=i,a=i.keyframes[0],o=i.keyframes[i.keyframes.length-1],l={done:!1,value:a},{stiffness:u,damping:d,mass:h,duration:c,velocity:m,isResolvedFromDuration:p}=function(e){let t={velocity:ia.velocity,stiffness:ia.stiffness,damping:ia.damping,mass:ia.mass,isResolvedFromDuration:!1,...e};if(!id(e,iu)&&id(e,il)){if(e.visualDuration){let r=2*Math.PI/(1.2*e.visualDuration),i=r*r,s=2*tK(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:ia.mass,stiffness:i,damping:s}}else{let r=function({duration:e=ia.duration,bounce:t=ia.bounce,velocity:r=ia.velocity,mass:i=ia.mass}){let s,n;tl(e<=ta(ia.maxDuration),"Spring duration must be 10 seconds or less");let a=1-t;a=tK(ia.minDamping,ia.maxDamping,a),e=tK(ia.minDuration,ia.maxDuration,to(e)),a<1?(s=t=>{let i=t*a,s=i*e;return .001-(i-r)/io(t,a)*Math.exp(-s)},n=t=>{let i=t*a*e,n=Math.pow(a,2)*Math.pow(t,2)*e,o=io(Math.pow(t,2),a);return(i*r+r-n)*Math.exp(-i)*(-s(t)+.001>0?-1:1)/o}):(s=t=>-.001+Math.exp(-t*e)*((t-r)*e+1),n=t=>e*e*(r-t)*Math.exp(-t*e));let o=function(e,t,r){let i=r;for(let r=1;r<12;r++)i-=e(i)/t(i);return i}(s,n,5/e);if(e=ta(e),isNaN(o))return{stiffness:ia.stiffness,damping:ia.damping,duration:e};{let t=Math.pow(o,2)*i;return{stiffness:t,damping:2*a*Math.sqrt(i*t),duration:e}}}(e);(t={...t,...r,mass:ia.mass}).isResolvedFromDuration=!0}}return t}({...i,velocity:-to(i.velocity||0)}),f=m||0,g=d/(2*Math.sqrt(u*h)),x=o-a,y=to(Math.sqrt(u/h)),v=5>Math.abs(x);if(s||(s=v?ia.restSpeed.granular:ia.restSpeed.default),n||(n=v?ia.restDelta.granular:ia.restDelta.default),g<1){let e=io(y,g);r=t=>o-Math.exp(-g*y*t)*((f+g*y*x)/e*Math.sin(e*t)+x*Math.cos(e*t))}else if(1===g)r=e=>o-Math.exp(-y*e)*(x+(f+y*x)*e);else{let e=y*Math.sqrt(g*g-1);r=t=>{let r=Math.exp(-g*y*t),i=Math.min(e*t,300);return o-r*((f+g*y*x)*Math.sinh(i)+e*x*Math.cosh(i))/e}}let b={calculatedDuration:p&&c||null,next:e=>{let t=r(e);if(p)l.done=e>=c;else{let i=0;g<1&&(i=0===e?ta(f):is(r,e,t));let a=Math.abs(i)<=s,u=Math.abs(o-t)<=n;l.done=a&&u}return l.value=l.done?o:t,l},toString:()=>{let e=Math.min(eY(b),2e4),t=e2(t=>b.next(e*t).value,e,30);return e+"ms "+t}};return b}function ic({keyframes:e,velocity:t=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:n=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:d}){let h,c;let m=e[0],p={done:!1,value:m},f=e=>void 0!==o&&e<o||void 0!==l&&e>l,g=e=>void 0===o?l:void 0===l?o:Math.abs(o-e)<Math.abs(l-e)?o:l,x=r*t,y=m+x,v=void 0===a?y:a(y);v!==y&&(x=v-m);let b=e=>-x*Math.exp(-e/i),w=e=>v+b(e),k=e=>{let t=b(e),r=w(e);p.done=Math.abs(t)<=u,p.value=p.done?v:r},j=e=>{f(p.value)&&(h=e,c=ih({keyframes:[p.value,g(p.value)],velocity:is(w,e,p.value),damping:s,stiffness:n,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:e=>{let t=!1;return(c||void 0!==h||(t=!0,k(e),j(e)),void 0!==h&&e>=h)?c.next(e-h):(t||k(e),p)}}}let im=tL(.42,0,1,1),ip=tL(0,0,.58,1),ig=tL(.42,0,.58,1),ix=e=>Array.isArray(e)&&"number"!=typeof e[0],iy={linear:tl,easeIn:im,easeInOut:ig,easeOut:ip,circIn:tW,circInOut:tq,circOut:tz,backIn:tI,backInOut:t$,backOut:tO,anticipate:tU},iv=e=>{if(eQ(e)){tl(4===e.length,"Cubic bezier arrays must contain four numerical values.");let[t,r,i,s]=e;return tL(t,r,i,s)}return"string"==typeof e?(tl(void 0!==iy[e],`Invalid easing type '${e}'`),iy[e]):e};function ib({duration:e=300,keyframes:t,times:r,ease:i="easeInOut"}){let s=ix(i)?i.map(iv):iv(i),n={done:!1,value:t[0]},a=function(e,t,{clamp:r=!0,ease:i,mixer:s}={}){let n=e.length;if(tl(n===t.length,"Both input and output ranges must be the same length"),1===n)return()=>t[0];if(2===n&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[n-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=function(e,t,r){let i=[],s=r||ii,n=e.length-1;for(let r=0;r<n;r++){let n=s(e[r],e[r+1]);t&&(n=r6(Array.isArray(t)?t[r]||tl:t,n)),i.push(n)}return i}(t,i,s),l=o.length,u=r=>{if(a&&r<e[0])return t[0];let i=0;if(l>1)for(;i<e.length-2&&!(r<e[i+1]);i++);let s=e1(e[i],e[i+1],r);return o[i](s)};return r?t=>u(tK(e[0],e[n-1],t)):u}((r&&r.length===t.length?r:function(e){let t=[0];return function(e,t){let r=e[e.length-1];for(let i=1;i<=t;i++){let s=e1(0,t,i);e.push(rG(r,1,s))}}(t,e.length-1),t}(t)).map(t=>t*e),t,{ease:Array.isArray(s)?s:t.map(()=>s||ig).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(n.value=a(t),n.done=t>=e,n)}}let iw=e=>{let t=({timestamp:t})=>e(t);return{start:()=>tx.update(t,!0),stop:()=>ty(t),now:()=>tv.isProcessing?tv.timestamp:tk.now()}},ik={decay:ic,inertia:ic,tween:ib,keyframes:ib,spring:ih},ij=e=>e/100;class iT extends rX{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();let{onStop:e}=this.options;e&&e()};let{name:t,motionValue:r,element:i,keyframes:s}=this.options,n=(null==i?void 0:i.KeyframeResolver)||rV;this.resolver=new n(s,(e,t)=>this.onKeyframesResolved(e,t),t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){let t,r;let{type:i="keyframes",repeat:s=0,repeatDelay:n=0,repeatType:a,velocity:o=0}=this.options,l=eX(i)?i:ik[i]||ib;l!==ib&&"number"!=typeof e[0]&&(t=r6(ij,ii(e[0],e[1])),e=[0,100]);let u=l({...this.options,keyframes:e});"mirror"===a&&(r=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),null===u.calculatedDuration&&(u.calculatedDuration=eY(u));let{calculatedDuration:d}=u,h=d+n;return{generator:u,mirroredGenerator:r,mapPercentToKeyframes:t,calculatedDuration:d,resolvedDuration:h,totalDuration:h*(s+1)-n}}onPostResolved(){let{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){let{resolved:r}=this;if(!r){let{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}let{finalKeyframe:i,generator:s,mirroredGenerator:n,mapPercentToKeyframes:a,keyframes:o,calculatedDuration:l,totalDuration:u,resolvedDuration:d}=r;if(null===this.startTime)return s.next(0);let{delay:h,repeat:c,repeatType:m,repeatDelay:p,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;let g=this.currentTime-h*(this.speed>=0?1:-1),x=this.speed>=0?g<0:g>u;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=u);let y=this.currentTime,v=s;if(c){let e=Math.min(this.currentTime,u)/d,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,c+1))%2&&("reverse"===m?(r=1-r,p&&(r-=p/d)):"mirror"===m&&(v=n)),y=tK(0,1,r)*d}let b=x?{done:!1,value:o[0]}:v.next(y);a&&(b.value=a(b.value));let{done:w}=b;x||null===l||(w=this.speed>=0?this.currentTime>=u:this.currentTime<=0);let k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&void 0!==i&&(b.value=rY(o,this.options,i)),f&&f(b.value),k&&this.finish(),b}get duration(){let{resolved:e}=this;return e?to(e.calculatedDuration):0}get time(){return to(this.currentTime)}set time(e){e=ta(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=to(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;let{driver:e=iw,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();let i=this.driver.now();null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=i):this.startTime=null!=r?r:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";let{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}let iN=new Set(["opacity","clipPath","filter","transform"]),iS=ez(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),iM={anticipate:tU,backInOut:t$,circInOut:tq};class iP extends rX{constructor(e){super(e);let{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new rZ(s,(e,t)=>this.onKeyframesResolved(e,t),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){var r;let{duration:i=300,times:s,ease:n,type:a,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if("string"==typeof n&&e0()&&n in iM&&(n=iM[n]),eX((r=this.options).type)||"spring"===r.type||!function e(t){return!!("function"==typeof t&&e0()||!t||"string"==typeof t&&(t in e5||e0())||eQ(t)||Array.isArray(t)&&t.every(e))}(r.ease)){let{onComplete:t,onUpdate:r,motionValue:o,element:l,...u}=this.options,d=function(e,t){let r=new iT({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0}),i={done:!1,value:e[0]},s=[],n=0;for(;!i.done&&n<2e4;)s.push((i=r.sample(n)).value),n+=10;return{times:void 0,keyframes:s,duration:n-10,ease:"linear"}}(e,u);1===(e=d.keyframes).length&&(e[1]=e[0]),i=d.duration,s=d.times,n=d.ease,a="keyframes"}let d=function(e,t,r,{delay:i=0,duration:s=300,repeat:n=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){let u={[t]:r};l&&(u.offset=l);let d=function e(t,r){if(t)return"function"==typeof t&&e0()?e2(t,r):eQ(t)?e4(t):Array.isArray(t)?t.map(t=>e(t,r)||e5.easeOut):e5[t]}(o,s);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:i,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:n+1,direction:"reverse"===a?"alternate":"normal"})}(o.owner.current,l,e,{...this.options,duration:i,times:s,ease:n});return d.startTime=null!=u?u:this.calcStartTime(),this.pendingTimeline?(eG(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{let{onComplete:r}=this.options;o.set(rY(e,this.options,t)),r&&r(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:s,type:a,ease:n,keyframes:e}}get duration(){let{resolved:e}=this;if(!e)return 0;let{duration:t}=e;return to(t)}get time(){let{resolved:e}=this;if(!e)return 0;let{animation:t}=e;return to(t.currentTime||0)}set time(e){let{resolved:t}=this;if(!t)return;let{animation:r}=t;r.currentTime=ta(e)}get speed(){let{resolved:e}=this;if(!e)return 1;let{animation:t}=e;return t.playbackRate}set speed(e){let{resolved:t}=this;if(!t)return;let{animation:r}=t;r.playbackRate=e}get state(){let{resolved:e}=this;if(!e)return"idle";let{animation:t}=e;return t.playState}get startTime(){let{resolved:e}=this;if(!e)return null;let{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){let{resolved:t}=this;if(!t)return tl;let{animation:r}=t;eG(r,e)}else this.pendingTimeline=e;return tl}play(){if(this.isStopped)return;let{resolved:e}=this;if(!e)return;let{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){let{resolved:e}=this;if(!e)return;let{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();let{resolved:e}=this;if(!e)return;let{animation:t,keyframes:r,duration:i,type:s,ease:n,times:a}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){let{motionValue:e,onUpdate:t,onComplete:o,element:l,...u}=this.options,d=new iT({...u,keyframes:r,duration:i,type:s,ease:n,times:a,isGenerator:!0}),h=ta(this.time);e.setWithVelocity(d.sample(h-10).value,d.sample(h).value,10)}let{onStop:o}=this.options;o&&o(),this.cancel()}complete(){let{resolved:e}=this;e&&e.animation.finish()}cancel(){let{resolved:e}=this;e&&e.animation.cancel()}static supports(e){let{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:n,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return iS()&&r&&iN.has(r)&&!o&&!l&&!i&&"mirror"!==s&&0!==n&&"inertia"!==a}}let iD={type:"spring",stiffness:500,damping:25,restSpeed:10},iA=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),iC={type:"keyframes",duration:.8},iE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},i_=(e,{keyframes:t})=>t.length>2?iC:td.has(e)?e.startsWith("scale")?iA(t[1]):iD:iE,iR=(e,t,r,i={},s,n)=>a=>{let o=eH(i,e)||{},l=o.delay||i.delay||0,{elapsed:u=0}=i;u-=ta(l);let d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:n?void 0:s};!function({when:e,delay:t,delayChildren:r,staggerChildren:i,staggerDirection:s,repeat:n,repeatType:a,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}(o)&&(d={...d,...i_(e,d)}),d.duration&&(d.duration=ta(d.duration)),d.repeatDelay&&(d.repeatDelay=ta(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let h=!1;if(!1!==d.type&&(0!==d.duration||d.repeatDelay)||(d.duration=0,0!==d.delay||(h=!0)),(tR.current||tp.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),h&&!n&&void 0!==t.get()){let e=rY(d.keyframes,o);if(void 0!==e)return tx.update(()=>{d.onUpdate(e),d.onComplete()}),new eK([])}return!n&&iP.supports(d)?new iP(d):new iT(d)};function iV(e,t,{delay:r=0,transitionOverride:i,type:s}={}){var n;let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;i&&(a=i);let u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(let t in l){let i=e.getValue(t,null!==(n=e.latestValues[t])&&void 0!==n?n:null),s=l[t];if(void 0===s||d&&function({protectedKeys:e,needsAnimating:t},r){let i=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,i}(d,t))continue;let o={delay:r,...eH(a||{},t)},h=!1;if(window.MotionHandoffAnimation){let r=e.props[t_];if(r){let e=window.MotionHandoffAnimation(r,t,tx);null!==e&&(o.startTime=e,h=!0)}}tC(e,t),i.start(iR(t,i,s,e.shouldReduceMotion&&th.has(t)?{type:!1}:o,e,h));let c=i.animation;c&&u.push(c)}return o&&Promise.all(u).then(()=>{tx.update(()=>{o&&function(e,t){let{transitionEnd:r={},transition:i={},...s}=e$(e,t)||{};for(let t in s={...s,...r}){let r=tm(s[t]);e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,tD(r))}}(e,o)})}),u}function iL(e,t,r={}){var i;let s=e$(e,t,"exit"===r.type?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0),{transition:n=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(n=r.transitionOverride);let a=s?()=>Promise.all(iV(e,s,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(i=0)=>{let{delayChildren:s=0,staggerChildren:a,staggerDirection:o}=n;return function(e,t,r=0,i=0,s=1,n){let a=[],o=(e.variantChildren.size-1)*i,l=1===s?(e=0)=>e*i:(e=0)=>o-e*i;return Array.from(e.variantChildren).sort(iF).forEach((e,i)=>{e.notify("AnimationStart",t),a.push(iL(e,t,{...n,delay:r+l(i)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(a)}(e,t,s+i,a,o,r)}:()=>Promise.resolve(),{when:l}=n;if(!l)return Promise.all([a(),o(r.delay)]);{let[e,t]="beforeChildren"===l?[a,o]:[o,a];return e().then(()=>t())}}function iF(e,t){return e.sortNodePosition(t)}let iB=eW.length,iO=[...eU].reverse(),iI=eU.length;function i$(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iU(){return{animate:i$(!0),whileInView:i$(),whileHover:i$(),whileTap:i$(),whileDrag:i$(),whileFocus:i$(),exit:i$()}}class iW{constructor(e){this.isMounted=!1,this.node=e}update(){}}class iz extends iW{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let i;if(e.notify("AnimationStart",t),Array.isArray(t))i=Promise.all(t.map(t=>iL(e,t,r)));else if("string"==typeof t)i=iL(e,t,r);else{let s="function"==typeof t?e$(e,t,r.custom):t;i=Promise.all(iV(e,s,r))}return i.then(()=>{e.notify("AnimationComplete",t)})})(e,t,r))),r=iU(),i=!0,s=t=>(r,i)=>{var s;let n=e$(e,i,"exit"===t?null===(s=e.presenceContext)||void 0===s?void 0:s.custom:void 0);if(n){let{transition:e,transitionEnd:t,...i}=n;r={...r,...i,...t}}return r};function n(n){let{props:a}=e,o=function e(t){if(!t)return;if(!t.isControllingVariants){let r=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(r.initial=t.props.initial),r}let r={};for(let e=0;e<iB;e++){let i=eW[e],s=t.props[i];(eB(s)||!1===s)&&(r[i]=s)}return r}(e.parent)||{},l=[],u=new Set,d={},h=1/0;for(let t=0;t<iI;t++){var c;let m=iO[t],p=r[m],f=void 0!==a[m]?a[m]:o[m],g=eB(f),x=m===n?p.isActive:null;!1===x&&(h=t);let y=f===o[m]&&f!==a[m]&&g;if(y&&i&&e.manuallyAnimateOnMount&&(y=!1),p.protectedKeys={...d},!p.isActive&&null===x||!f&&!p.prevProp||eV(f)||"boolean"==typeof f)continue;let v=(c=p.prevProp,"string"==typeof f?f!==c:!!Array.isArray(f)&&!eF(f,c)),b=v||m===n&&p.isActive&&!y&&g||t>h&&g,w=!1,k=Array.isArray(f)?f:[f],j=k.reduce(s(m),{});!1===x&&(j={});let{prevResolvedValues:T={}}=p,N={...T,...j},S=t=>{b=!0,u.has(t)&&(w=!0,u.delete(t)),p.needsAnimating[t]=!0;let r=e.getValue(t);r&&(r.liveStyle=!1)};for(let e in N){let t=j[e],r=T[e];if(!d.hasOwnProperty(e))(eL(t)&&eL(r)?eF(t,r):t===r)?void 0!==t&&u.has(e)?S(e):p.protectedKeys[e]=!0:null!=t?S(e):u.add(e)}p.prevProp=f,p.prevResolvedValues=j,p.isActive&&(d={...d,...j}),i&&e.blockInitialAnimation&&(b=!1);let M=!(y&&v)||w;b&&M&&l.push(...k.map(e=>({animation:e,options:{type:m}})))}if(u.size){let t={};u.forEach(r=>{let i=e.getBaseTarget(r),s=e.getValue(r);s&&(s.liveStyle=!0),t[r]=null!=i?i:null}),l.push({animation:t})}let m=!!l.length;return i&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(m=!1),i=!1,m?t(l):Promise.resolve()}return{animateChanges:n,setActive:function(t,i){var s;if(r[t].isActive===i)return Promise.resolve();null===(s=e.variantChildren)||void 0===s||s.forEach(e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,i)}),r[t].isActive=i;let a=n(t);for(let e in r)r[e].protectedKeys={};return a},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=iU(),i=!0}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();eV(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}let iq=0;class iZ extends iW{constructor(){super(...arguments),this.id=iq++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;let i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){let{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}function iK(e,t,r,i={passive:!0}){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r)}function iH(e){return{point:{x:e.pageX,y:e.pageY}}}let iY=e=>t=>e7(t)&&e(t,iH(t));function iX(e,t,r,i){return iK(e,t,iY(r),i)}let iG=(e,t)=>Math.abs(e-t);class iQ{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=i1(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){return Math.sqrt(iG(e.x,t.x)**2+iG(e.y,t.y)**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;let{point:i}=e,{timestamp:s}=tv;this.history.push({...i,timestamp:s});let{onStart:n,onMove:a}=this.handlers;t||(n&&n(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=iJ(t,this.transformPagePoint),tx.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:i,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let n=i1("pointercancel"===e.type?this.lastMoveEventInfo:iJ(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,n),i&&i(e,n)},!e7(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;let n=iJ(iH(e),this.transformPagePoint),{point:a}=n,{timestamp:o}=tv;this.history=[{...a,timestamp:o}];let{onSessionStart:l}=t;l&&l(e,i1(n,this.history)),this.removeListeners=r6(iX(this.contextWindow,"pointermove",this.handlePointerMove),iX(this.contextWindow,"pointerup",this.handlePointerUp),iX(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ty(this.updatePoint)}}function iJ(e,t){return t?{point:t(e.point)}:e}function i0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function i1({point:e},t){return{point:e,delta:i0(e,i2(t)),offset:i0(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,i=null,s=i2(e);for(;r>=0&&(i=e[r],!(s.timestamp-i.timestamp>ta(.1)));)r--;if(!i)return{x:0,y:0};let n=to(s.timestamp-i.timestamp);if(0===n)return{x:0,y:0};let a={x:(s.x-i.x)/n,y:(s.y-i.y)/n};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,0)}}function i2(e){return e[e.length-1]}function i4(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function i5(e){return e.max-e.min}function i3(e,t,r,i=.5){e.origin=i,e.originPoint=rG(t.min,t.max,e.origin),e.scale=i5(r)/i5(t),e.translate=rG(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function i6(e,t,r,i){i3(e.x,t.x,r.x,i?i.originX:void 0),i3(e.y,t.y,r.y,i?i.originY:void 0)}function i8(e,t,r){e.min=r.min+t.min,e.max=e.min+i5(t)}function i9(e,t,r){e.min=t.min-r.min,e.max=e.min+i5(t)}function i7(e,t,r){i9(e.x,t.x,r.x),i9(e.y,t.y,r.y)}function se(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function st(e,t){let r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,i]=[i,r]),{min:r,max:i}}function sr(e,t,r){return{min:si(e,t),max:si(e,r)}}function si(e,t){return"number"==typeof e?e:e[t]||0}let ss=()=>({translate:0,scale:1,origin:0,originPoint:0}),sn=()=>({x:ss(),y:ss()}),sa=()=>({min:0,max:0}),so=()=>({x:sa(),y:sa()});function sl(e){return[e("x"),e("y")]}function su({top:e,left:t,right:r,bottom:i}){return{x:{min:t,max:r},y:{min:e,max:i}}}function sd(e){return void 0===e||1===e}function sh({scale:e,scaleX:t,scaleY:r}){return!sd(e)||!sd(t)||!sd(r)}function sc(e){return sh(e)||sm(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function sm(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function sp(e,t,r,i,s){return void 0!==s&&(e=i+s*(e-i)),i+r*(e-i)+t}function sf(e,t=0,r=1,i,s){e.min=sp(e.min,t,r,i,s),e.max=sp(e.max,t,r,i,s)}function sg(e,{x:t,y:r}){sf(e.x,t.translate,t.scale,t.originPoint),sf(e.y,r.translate,r.scale,r.originPoint)}function sx(e,t){e.min=e.min+t,e.max=e.max+t}function sy(e,t,r,i,s=.5){let n=rG(e.min,e.max,s);sf(e,t,r,n,i)}function sv(e,t){sy(e.x,t.x,t.scaleX,t.scale,t.originX),sy(e.y,t.y,t.scaleY,t.scale,t.originY)}function sb(e,t){return su(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}let sw=({current:e})=>e?e.ownerDocument.defaultView:null,sk=new WeakMap;class sj{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=so(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){let{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;let{dragSnapToOrigin:i}=this.getProps();this.panSession=new iQ(e,{onSessionStart:e=>{let{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(iH(e).point)},onStart:(e,t)=>{let{drag:r,dragPropagation:i,onDragStart:s}=this.getProps();if(r&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===r||"y"===r?e3[r]?null:(e3[r]=!0,()=>{e3[r]=!1}):e3.x||e3.y?null:(e3.x=e3.y=!0,()=>{e3.x=e3.y=!1}),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sl(e=>{let t=this.getAxisMotionValue(e).get()||0;if(t9.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let i=r.layout.layoutBox[e];if(i){let e=i5(i);t=parseFloat(t)/100*e}}}this.originPoint[e]=t}),s&&tx.postRender(()=>s(e,t)),tC(this.visualElement,"transform");let{animationState:n}=this.visualElement;n&&n.setActive("whileDrag",!0)},onMove:(e,t)=>{let{dragPropagation:r,dragDirectionLock:i,onDirectionLock:s,onDrag:n}=this.getProps();if(!r&&!this.openDragLock)return;let{offset:a}=t;if(i&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(a),null!==this.currentDirection&&s&&s(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),n&&n(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>sl(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,contextWindow:sw(this.visualElement)})}stop(e,t){let r=this.isDragging;if(this.cancel(),!r)return;let{velocity:i}=t;this.startAnimation(i);let{onDragEnd:s}=this.getProps();s&&tx.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){let{drag:i}=this.getProps();if(!r||!sT(e,i,this.currentDirection))return;let s=this.getAxisMotionValue(e),n=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(n=function(e,{min:t,max:r},i){return void 0!==t&&e<t?e=i?rG(t,e,i.min):Math.max(e,t):void 0!==r&&e>r&&(e=i?rG(r,e,i.max):Math.min(e,r)),e}(n,this.constraints[e],this.elastic[e])),s.set(n)}resolveConstraints(){var e;let{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,s=this.constraints;t&&i4(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=function(e,{top:t,left:r,bottom:i,right:s}){return{x:se(e.x,r,s),y:se(e.y,t,i)}}(i.layoutBox,t):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:sr(e,"left","right"),y:sr(e,"top","bottom")}}(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&sl(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){let r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(i.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!i4(t))return!1;let i=t.current;tl(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:s}=this.visualElement;if(!s||!s.layout)return!1;let n=function(e,t,r){let i=sb(e,r),{scroll:s}=t;return s&&(sx(i.x,s.offset.x),sx(i.y,s.offset.y)),i}(i,s.root,this.visualElement.getTransformPagePoint()),a={x:st((e=s.layout.layoutBox).x,n.x),y:st(e.y,n.y)};if(r){let e=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=su(e))}return a}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:n,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{};return Promise.all(sl(a=>{if(!sT(a,t,this.currentDirection))return;let l=o&&o[a]||{};n&&(l={min:0,max:0});let u={type:"inertia",velocity:r?e[a]:0,bounceStiffness:i?200:1e6,bounceDamping:i?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(a,u)})).then(a)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return tC(this.visualElement,e),r.start(iR(e,r,0,t,this.visualElement,!1))}stopAnimation(){sl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sl(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sl(t=>{let{drag:r}=this.getProps();if(!sT(t,r,this.currentDirection))return;let{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){let{min:r,max:n}=i.layout.layoutBox[t];s.set(e[t]-rG(r,n,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!i4(t)||!r||!this.constraints)return;this.stopAnimation();let i={x:0,y:0};sl(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){let r=t.get();i[e]=function(e,t){let r=.5,i=i5(e),s=i5(t);return s>i?r=e1(t.min,t.max-i,e.min):i>s&&(r=e1(e.min,e.max-s,t.min)),tK(0,1,r)}({min:r,max:r},this.constraints[e])}});let{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sl(t=>{if(!sT(t,e,null))return;let r=this.getAxisMotionValue(t),{min:s,max:n}=this.constraints[t];r.set(rG(s,n,i[t]))})}addListeners(){if(!this.visualElement.current)return;sk.set(this.visualElement,this);let e=iX(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();i4(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),tx.read(t);let s=iK(window,"resize",()=>this.scalePositionWithinConstraints()),n=r.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(sl(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),e(),i(),n&&n()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:n=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:n,dragMomentum:a}}}function sT(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}class sN extends iW{constructor(e){super(e),this.removeGroupControls=tl,this.removeListeners=tl,this.controls=new sj(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tl}unmount(){this.removeGroupControls(),this.removeListeners()}}let sS=e=>(t,r)=>{e&&tx.postRender(()=>e(t,r))};class sM extends iW{constructor(){super(...arguments),this.removePointerDownListener=tl}onPointerDown(e){this.session=new iQ(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sw(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:sS(e),onStart:sS(t),onMove:r,onEnd:(e,t)=>{delete this.session,i&&tx.postRender(()=>i(e,t))}}}mount(){this.removePointerDownListener=iX(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let sP=(0,o.createContext)(null);function sD(e=!0){let t=(0,o.useContext)(sP);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:i,register:s}=t,n=(0,o.useId)();(0,o.useEffect)(()=>{e&&s(n)},[e]);let a=(0,o.useCallback)(()=>e&&i&&i(n),[n,i,e]);return!r&&i?[!1,a]:[!0]}let sA=(0,o.createContext)({}),sC=(0,o.createContext)({}),sE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function s_(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let sR={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!t7.test(e))return e;e=parseFloat(e)}let r=s_(e,t.target.x),i=s_(e,t.target.y);return`${r}% ${i}%`}},sV={},{schedule:sL,cancel:sF}=tg(queueMicrotask,!1);class sB extends o.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Object.assign(sV,sI),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),sE.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,n=r.projection;return n&&(n.isPresent=s,i||e.layoutDependency!==t||void 0===t?n.willUpdate():this.safeToRemove(),e.isPresent===s||(s?n.promote():n.relegate()||tx.postRender(()=>{let e=n.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),sL.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sO(e){let[t,r]=sD(),i=(0,o.useContext)(sA);return(0,a.jsx)(sB,{...e,layoutGroup:i,switchLayoutGroup:(0,o.useContext)(sC),isPresent:t,safeToRemove:r})}let sI={borderRadius:{...sR,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sR,borderTopRightRadius:sR,borderBottomLeftRadius:sR,borderBottomRightRadius:sR,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let i=rm.parse(e);if(i.length>5)return e;let s=rm.createTransformer(e),n="number"!=typeof i[0]?1:0,a=r.x.scale*t.x,o=r.y.scale*t.y;i[0+n]/=a,i[1+n]/=o;let l=rG(a,o,.5);return"number"==typeof i[2+n]&&(i[2+n]/=l),"number"==typeof i[3+n]&&(i[3+n]/=l),s(i)}}},s$=(e,t)=>e.depth-t.depth;class sU{constructor(){this.children=[],this.isDirty=!1}add(e){tj(this.children,e),this.isDirty=!0}remove(e){tT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(s$),this.isDirty=!1,this.children.forEach(e)}}function sW(e){let t=tA(e)?e.get():e;return tc(t)?t.toValue():t}let sz=["TopLeft","TopRight","BottomLeft","BottomRight"],sq=sz.length,sZ=e=>"string"==typeof e?parseFloat(e):e,sK=e=>"number"==typeof e||t7.test(e);function sH(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let sY=sG(0,.5,tz),sX=sG(.5,.95,tl);function sG(e,t,r){return i=>i<e?0:i>t?1:r(e1(e,t,i))}function sQ(e,t){e.min=t.min,e.max=t.max}function sJ(e,t){sQ(e.x,t.x),sQ(e.y,t.y)}function s0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function s1(e,t,r,i,s){return e-=t,e=i+1/r*(e-i),void 0!==s&&(e=i+1/s*(e-i)),e}function s2(e,t,[r,i,s],n,a){!function(e,t=0,r=1,i=.5,s,n=e,a=e){if(t9.test(t)&&(t=parseFloat(t),t=rG(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let o=rG(n.min,n.max,i);e===n&&(o-=t),e.min=s1(e.min,t,r,o,s),e.max=s1(e.max,t,r,o,s)}(e,t[r],t[i],t[s],t.scale,n,a)}let s4=["x","scaleX","originX"],s5=["y","scaleY","originY"];function s3(e,t,r,i){s2(e.x,t,s4,r?r.x:void 0,i?i.x:void 0),s2(e.y,t,s5,r?r.y:void 0,i?i.y:void 0)}function s6(e){return 0===e.translate&&1===e.scale}function s8(e){return s6(e.x)&&s6(e.y)}function s9(e,t){return e.min===t.min&&e.max===t.max}function s7(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ne(e,t){return s7(e.x,t.x)&&s7(e.y,t.y)}function nt(e){return i5(e.x)/i5(e.y)}function nr(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class ni{constructor(){this.members=[]}add(e){tj(this.members,e),e.scheduleRender()}remove(e){if(tT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t;let r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:i}=e.options;!1===i&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let ns={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},nn="undefined"!=typeof window&&void 0!==window.MotionDebug,na=["","X","Y","Z"],no={visibility:"hidden"},nl=0;function nu(e,t,r,i){let{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function nd({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(e={},r=null==t?void 0:t()){this.id=nl++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,nn&&(ns.totalNodes=ns.resolvedTargetDeltas=ns.recalculatedProjection=0),this.nodes.forEach(nm),this.nodes.forEach(nb),this.nodes.forEach(nw),this.nodes.forEach(np),nn&&window.MotionDebug.record(ns)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new sU)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new tN),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,r=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=t instanceof SVGElement&&"svg"!==t.tagName,this.instance=t;let{layoutId:i,layout:s,visualElement:n}=this.options;if(n&&!n.current&&n.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(s||i)&&(this.isLayoutDirty=!0),e){let r;let i=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,r&&r(),r=function(e,t){let r=tk.now(),i=({timestamp:t})=>{let s=t-r;s>=250&&(ty(i),e(s-250))};return tx.read(i,!0),()=>ty(i)}(i,250),sE.hasAnimatedSinceResize&&(sE.hasAnimatedSinceResize=!1,this.nodes.forEach(nv))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&n&&(i||s)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:r,layout:i})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let s=this.options.transition||n.getDefaultTransition()||nM,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=n.getProps(),l=!this.targetLayout||!ne(this.targetLayout,i)||r,u=!t&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,u);let t={...eH(s,"layout"),onPlay:a,onComplete:o};(n.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||nv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ty(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nk),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:r}=t.options;if(!r)return;let i=r.props[t_];if(window.MotionHasOptimisedAnimation(i,"transform")){let{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",tx,!(e||r))}let{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&e(s)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ng);return}this.isUpdating||this.nodes.forEach(nx),this.isUpdating=!1,this.nodes.forEach(ny),this.nodes.forEach(nh),this.nodes.forEach(nc),this.clearAllSnapshots();let e=tk.now();tv.delta=tK(0,1e3/60,e-tv.timestamp),tv.timestamp=e,tv.isProcessing=!0,tb.update.process(tv),tb.preRender.process(tv),tb.render.process(tv),tv.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sL.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nf),this.sharedNodes.forEach(nj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tx.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tx.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=so(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){let t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!s8(this.projectionDelta),r=this.getTransformTemplate(),i=r?r(this.latestValues,""):void 0,n=i!==this.prevTransformTemplateValue;e&&(t||sc(this.latestValues)||n)&&(s(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),i=this.removeElementScroll(r);return e&&(i=this.removeTransform(i)),nA((t=i).x),nA(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){var e;let{visualElement:t}=this.options;if(!t)return so();let r=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(nE))){let{scroll:e}=this.root;e&&(sx(r.x,e.offset.x),sx(r.y,e.offset.y))}return r}removeElementScroll(e){var t;let r=so();if(sJ(r,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return r;for(let t=0;t<this.path.length;t++){let i=this.path[t],{scroll:s,options:n}=i;i!==this.root&&s&&n.layoutScroll&&(s.wasRoot&&sJ(r,e),sx(r.x,s.offset.x),sx(r.y,s.offset.y))}return r}applyTransform(e,t=!1){let r=so();sJ(r,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&sv(r,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),sc(i.latestValues)&&sv(r,i.latestValues)}return sc(this.latestValues)&&sv(r,this.latestValues),r}removeTransform(e){let t=so();sJ(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!sc(r.latestValues))continue;sh(r.latestValues)&&r.updateSnapshot();let i=so();sJ(i,r.measurePageBox()),s3(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}return sc(this.latestValues)&&s3(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tv.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t,r,i,s;let n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);let a=!!this.resumingFrom||this!==n;if(!(e||a&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:o,layoutId:l}=this.options;if(this.layout&&(o||l)){if(this.resolvedRelativeTargetAt=tv.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=so(),this.relativeTargetOrigin=so(),i7(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),sJ(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if((this.target||(this.target=so(),this.targetWithTransforms=so()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target)?(this.forceRelativeParentToResolveTarget(),r=this.target,i=this.relativeTarget,s=this.relativeParent.target,i8(r.x,i.x,s.x),i8(r.y,i.y,s.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sJ(this.target,this.layout.layoutBox),sg(this.target,this.targetDelta)):sJ(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=so(),this.relativeTargetOrigin=so(),i7(this.relativeTargetOrigin,this.target,e.target),sJ(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}nn&&ns.resolvedTargetDeltas++}}}getClosestProjectingParent(){return!this.parent||sh(this.parent.latestValues)||sm(this.parent.latestValues)?void 0:this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;let t=this.getLead(),r=!!this.resumingFrom||this!==t,i=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(i=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===tv.timestamp&&(i=!1),i)return;let{layout:s,layoutId:n}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(s||n))return;sJ(this.layoutCorrected,this.layout.layoutBox);let a=this.treeScale.x,o=this.treeScale.y;(function(e,t,r,i=!1){let s,n;let a=r.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){n=(s=r[o]).projectionDelta;let{visualElement:a}=s.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&sv(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),n&&(t.x*=n.x.scale,t.y*=n.y.scale,sg(e,n)),i&&sc(s.latestValues)&&sv(e,s.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}})(this.layoutCorrected,this.treeScale,this.path,r),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox,t.targetWithTransforms=so());let{target:l}=t;if(!l){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(s0(this.prevProjectionDelta.x,this.projectionDelta.x),s0(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),i6(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===a&&this.treeScale.y===o&&nr(this.projectionDelta.x,this.prevProjectionDelta.x)&&nr(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),nn&&ns.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sn(),this.projectionDelta=sn(),this.projectionDeltaWithTransform=sn()}setAnimationOrigin(e,t=!1){let r;let i=this.snapshot,s=i?i.latestValues:{},n={...this.latestValues},a=sn();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=so(),l=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),d=!u||u.members.length<=1,h=!!(l&&!d&&!0===this.options.crossfade&&!this.path.some(nS));this.animationProgress=0,this.mixTargetDelta=t=>{let i=t/1e3;if(nT(a.x,e.x,i),nT(a.y,e.y,i),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,c,m,p;i7(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m=this.relativeTarget,p=this.relativeTargetOrigin,nN(m.x,p.x,o.x,i),nN(m.y,p.y,o.y,i),r&&(u=this.relativeTarget,c=r,s9(u.x,c.x)&&s9(u.y,c.y))&&(this.isProjectionDirty=!1),r||(r=so()),sJ(r,this.relativeTarget)}l&&(this.animationValues=n,function(e,t,r,i,s,n){s?(e.opacity=rG(0,void 0!==r.opacity?r.opacity:1,sY(i)),e.opacityExit=rG(void 0!==t.opacity?t.opacity:1,0,sX(i))):n&&(e.opacity=rG(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,i));for(let s=0;s<sq;s++){let n=`border${sz[s]}Radius`,a=sH(t,n),o=sH(r,n);(void 0!==a||void 0!==o)&&(a||(a=0),o||(o=0),0===a||0===o||sK(a)===sK(o)?(e[n]=Math.max(rG(sZ(a),sZ(o),i),0),(t9.test(o)||t9.test(a))&&(e[n]+="%")):e[n]=o)}(t.rotate||r.rotate)&&(e.rotate=rG(t.rotate||0,r.rotate||0,i))}(n,s,this.latestValues,i,h,d)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=i},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ty(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tx.update(()=>{sE.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,r){let i=tA(0)?0:tD(0);return i.start(iR("",i,1e3,r)),i.animation}(0,0,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:i,latestValues:s}=e;if(t&&r&&i){if(this!==e&&this.layout&&i&&nC(this.options.animationType,this.layout.layoutBox,i.layoutBox)){r=this.target||so();let t=i5(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let i=i5(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+i}sJ(t,r),sv(t,s),i6(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new ni),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let i=this.getStack();i&&i.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;let i={};r.z&&nu("z",e,i,this.animationValues);for(let t=0;t<na.length;t++)nu(`rotate${na[t]}`,e,i,this.animationValues),nu(`skew${na[t]}`,e,i,this.animationValues);for(let t in e.render(),i)e.setStaticValue(t,i[t]),this.animationValues&&(this.animationValues[t]=i[t]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return no;let i={visibility:""},s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=sW(null==e?void 0:e.pointerEvents)||"",i.transform=s?s(this.latestValues,""):"none",i;let n=this.getLead();if(!this.projectionDelta||!this.layout||!n.target){let t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=sW(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!sc(this.latestValues)&&(t.transform=s?s({},""):"none",this.hasProjected=!1),t}let a=n.animationValues||n.latestValues;this.applyTransformsToTarget(),i.transform=function(e,t,r){let i="",s=e.x.translate/t.x,n=e.y.translate/t.y,a=(null==r?void 0:r.z)||0;if((s||n||a)&&(i=`translate3d(${s}px, ${n}px, ${a}px) `),(1!==t.x||1!==t.y)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),r){let{transformPerspective:e,rotate:t,rotateX:s,rotateY:n,skewX:a,skewY:o}=r;e&&(i=`perspective(${e}px) ${i}`),t&&(i+=`rotate(${t}deg) `),s&&(i+=`rotateX(${s}deg) `),n&&(i+=`rotateY(${n}deg) `),a&&(i+=`skewX(${a}deg) `),o&&(i+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(i+=`scale(${o}, ${l})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,a),s&&(i.transform=s(a,i.transform));let{x:o,y:l}=this.projectionDelta;for(let e in i.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,n.animationValues?i.opacity=n===this?null!==(r=null!==(t=a.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:i.opacity=n===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0,sV){if(void 0===a[e])continue;let{correct:t,applyTo:r}=sV[e],s="none"===i.transform?a[e]:t(a[e],n);if(r){let e=r.length;for(let t=0;t<e;t++)i[r[t]]=s}else i[e]=s}return this.options.layoutId&&(i.pointerEvents=n===this?sW(null==e?void 0:e.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(ng),this.root.sharedNodes.clear()}}}function nh(e){e.updateLayout()}function nc(e){var t;let r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){let{layoutBox:t,measuredBox:i}=e.layout,{animationType:s}=e.options,n=r.source!==e.layout.source;"size"===s?sl(e=>{let i=n?r.measuredBox[e]:r.layoutBox[e],s=i5(i);i.min=t[e].min,i.max=i.min+s}):nC(s,r.layoutBox,t)&&sl(i=>{let s=n?r.measuredBox[i]:r.layoutBox[i],a=i5(t[i]);s.max=s.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+a)});let a=sn();i6(a,t,r.layoutBox);let o=sn();n?i6(o,e.applyTransform(i,!0),r.measuredBox):i6(o,t,r.layoutBox);let l=!s8(a),u=!1;if(!e.resumeFrom){let i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){let{snapshot:s,layout:n}=i;if(s&&n){let a=so();i7(a,r.layoutBox,s.layoutBox);let o=so();i7(o,t,n.layoutBox),ne(a,o)||(u=!0),i.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function nm(e){nn&&ns.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function np(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nf(e){e.clearSnapshot()}function ng(e){e.clearMeasurements()}function nx(e){e.isLayoutDirty=!1}function ny(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function nv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function nb(e){e.resolveTargetDelta()}function nw(e){e.calcProjection()}function nk(e){e.resetSkewAndRotation()}function nj(e){e.removeLeadSnapshot()}function nT(e,t,r){e.translate=rG(t.translate,0,r),e.scale=rG(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function nN(e,t,r,i){e.min=rG(t.min,r.min,i),e.max=rG(t.max,r.max,i)}function nS(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let nM={duration:.45,ease:[.4,0,.1,1]},nP=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),nD=nP("applewebkit/")&&!nP("chrome/")?Math.round:tl;function nA(e){e.min=nD(e.min),e.max=nD(e.max)}function nC(e,t,r){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(nt(t)-nt(r)))}function nE(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}let n_=nd({attachResizeListener:(e,t)=>iK(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nR={current:void 0},nV=nd({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!nR.current){let e=new n_({});e.mount(window),e.setOptions({layoutScroll:!0}),nR.current=e}return nR.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function nL(e,t,r){let{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===r);let s=i["onHover"+r];s&&tx.postRender(()=>s(t,iH(t)))}class nF extends iW{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[i,s,n]=e6(e,r),a=e8(e=>{let{target:r}=e,i=t(e);if("function"!=typeof i||!r)return;let n=e8(e=>{i(e),r.removeEventListener("pointerleave",n)});r.addEventListener("pointerleave",n,s)});return i.forEach(e=>{e.addEventListener("pointerenter",a,s)}),n}(e,e=>(nL(this.node,e,"Start"),e=>nL(this.node,e,"End"))))}unmount(){}}class nB extends iW{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=r6(iK(this.node.current,"focus",()=>this.onFocus()),iK(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function nO(e,t,r){let{props:i}=e;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===r);let s=i["onTap"+("End"===r?"":r)];s&&tx.postRender(()=>s(t,iH(t)))}class nI extends iW{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[i,s,n]=e6(e,r),a=e=>{let i=e.currentTarget;if(!tn(e)||tt.has(i))return;tt.add(i);let n=t(e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),tn(e)&&tt.has(i)&&(tt.delete(i),"function"==typeof n&&n(e,{success:t}))},o=e=>{a(e,r.useGlobalTarget||e9(i,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return i.forEach(e=>{te.has(e.tagName)||-1!==e.tabIndex||null!==e.getAttribute("tabindex")||(e.tabIndex=0),(r.useGlobalTarget?window:e).addEventListener("pointerdown",a,s),e.addEventListener("focus",e=>ts(e,s),s)}),n}(e,e=>(nO(this.node,e,"Start"),(e,{success:t})=>nO(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}let n$=new WeakMap,nU=new WeakMap,nW=e=>{let t=n$.get(e.target);t&&t(e)},nz=e=>{e.forEach(nW)},nq={some:0,all:1};class nZ extends iW{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,n={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof i?i:nq[i]};return function(e,t,r){let i=function({root:e,...t}){let r=e||document;nU.has(r)||nU.set(r,{});let i=nU.get(r),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(nz,{root:e,...t})),i[s]}(t);return n$.set(e,r),i.observe(e),()=>{n$.delete(e),i.unobserve(e)}}(this.node.current,n,e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,s&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:i}=this.node.getProps(),n=t?r:i;n&&n(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}let nK=(0,o.createContext)({strict:!1}),nH=(0,o.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),nY=(0,o.createContext)({});function nX(e){return eV(e.animate)||eW.some(t=>eB(e[t]))}function nG(e){return!!(nX(e)||e.variants)}function nQ(e){return Array.isArray(e)?e.join(" "):e}let nJ="undefined"!=typeof window,n0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},n1={};for(let e in n0)n1[e]={isEnabled:t=>n0[e].some(e=>!!t[e])};let n2=Symbol.for("motionComponentSymbol"),n4=nJ?o.useLayoutEffect:o.useEffect,n5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function n3(e){if("string"!=typeof e||e.includes("-"));else if(n5.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}function n6(e){let t=(0,o.useRef)(null);return null===t.current&&(t.current=e()),t.current}let n8=e=>(t,r)=>{let i=(0,o.useContext)(nY),s=(0,o.useContext)(sP),n=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},i,s,n){let a={latestValues:function(e,t,r,i){let s={},n=i(e,{});for(let e in n)s[e]=sW(n[e]);let{initial:a,animate:o}=e,l=nX(e),u=nG(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let d=!!r&&!1===r.initial,h=(d=d||!1===a)?o:a;if(h&&"boolean"!=typeof h&&!eV(h)){let t=Array.isArray(h)?h:[h];for(let r=0;r<t.length;r++){let i=eI(e,t[r]);if(i){let{transitionEnd:e,transition:t,...r}=i;for(let e in r){let t=r[e];if(Array.isArray(t)){let e=d?t.length-1:0;t=t[e]}null!==t&&(s[e]=t)}for(let t in e)s[t]=e[t]}}}return s}(i,s,n,e),renderState:t()};return r&&(a.onMount=e=>r({props:i,current:e,...a}),a.onUpdate=e=>r(e)),a})(e,t,i,s);return r?n():n6(n)},n9=(e,t)=>t&&"number"==typeof e?t.transform(e):e,n7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ae=tu.length;function at(e,t,r){let{style:i,vars:s,transformOrigin:n}=e,a=!1,o=!1;for(let e in t){let r=t[e];if(td.has(e)){a=!0;continue}if(rB(e)){s[e]=r;continue}{let t=n9(r,rv[e]);e.startsWith("origin")?(o=!0,n[e]=t):i[e]=t}}if(!t.transform&&(a||r?i.transform=function(e,t,r){let i="",s=!0;for(let n=0;n<ae;n++){let a=tu[n],o=e[a];if(void 0===o)continue;let l=!0;if(!(l="number"==typeof o?o===(a.startsWith("scale")?1:0):0===parseFloat(o))||r){let e=n9(o,rv[a]);if(!l){s=!1;let t=n7[a]||a;i+=`${t}(${e}) `}r&&(t[a]=e)}}return i=i.trim(),r?i=r(t,s?"":i):s&&(i="none"),i}(t,e.transform,r):i.transform&&(i.transform="none")),o){let{originX:e="50%",originY:t="50%",originZ:r=0}=n;i.transformOrigin=`${e} ${t} ${r}`}}let ar={offset:"stroke-dashoffset",array:"stroke-dasharray"},ai={offset:"strokeDashoffset",array:"strokeDasharray"};function as(e,t,r){return"string"==typeof e?e:t7.transform(t+r*e)}function an(e,{attrX:t,attrY:r,attrScale:i,originX:s,originY:n,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},d,h){if(at(e,u,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:c,style:m,dimensions:p}=e;c.transform&&(p&&(m.transform=c.transform),delete c.transform),p&&(void 0!==s||void 0!==n||m.transform)&&(m.transformOrigin=function(e,t,r){let i=as(t,e.x,e.width),s=as(r,e.y,e.height);return`${i} ${s}`}(p,void 0!==s?s:.5,void 0!==n?n:.5)),void 0!==t&&(c.x=t),void 0!==r&&(c.y=r),void 0!==i&&(c.scale=i),void 0!==a&&function(e,t,r=1,i=0,s=!0){e.pathLength=1;let n=s?ar:ai;e[n.offset]=t7.transform(-i);let a=t7.transform(t),o=t7.transform(r);e[n.array]=`${a} ${o}`}(c,a,o,l,!1)}let aa=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ao=()=>({...aa(),attrs:{}}),al=e=>"string"==typeof e&&"svg"===e.toLowerCase();function au(e,{style:t,vars:r},i,s){for(let n in Object.assign(e.style,t,s&&s.getProjectionStyles(i)),r)e.style.setProperty(n,r[n])}let ad=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ah(e,t,r,i){for(let r in au(e,t,void 0,i),t.attrs)e.setAttribute(ad.has(r)?r:tE(r),t.attrs[r])}function ac(e,{layout:t,layoutId:r}){return td.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!sV[e]||"opacity"===e)}function am(e,t,r){var i;let{style:s}=e,n={};for(let a in s)(tA(s[a])||t.style&&tA(t.style[a])||ac(a,e)||(null===(i=null==r?void 0:r.getValue(a))||void 0===i?void 0:i.liveStyle)!==void 0)&&(n[a]=s[a]);return n}function ap(e,t,r){let i=am(e,t,r);for(let r in e)(tA(e[r])||tA(t[r]))&&(i[-1!==tu.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return i}let af=["x","y","width","height","cx","cy","r"],ag={useVisualState:n8({scrapeMotionValuesFromProps:ap,createRenderState:ao,onUpdate:({props:e,prevProps:t,current:r,renderState:i,latestValues:s})=>{if(!r)return;let n=!!e.drag;if(!n){for(let e in s)if(td.has(e)){n=!0;break}}if(!n)return;let a=!t;if(t)for(let r=0;r<af.length;r++){let i=af[r];e[i]!==t[i]&&(a=!0)}a&&tx.read(()=>{(function(e,t){try{t.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(e){t.dimensions={x:0,y:0,width:0,height:0}}})(r,i),tx.render(()=>{an(i,s,al(r.tagName),e.transformTemplate),ah(r,i)})})}})},ax={useVisualState:n8({scrapeMotionValuesFromProps:am,createRenderState:aa})};function ay(e,t,r){for(let i in t)tA(t[i])||ac(i,r)||(e[i]=t[i])}let av=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ab(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||av.has(e)}let aw=e=>!ab(e);try{!function(e){e&&(aw=t=>t.startsWith("on")?!ab(t):e(t))}(require("@emotion/is-prop-valid").default)}catch(e){}let ak={current:null},aj={current:!1},aT=[...rz,rs,rm],aN=e=>aT.find(rW(e)),aS=new WeakMap,aM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class aP{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:n},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=rV,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=tk.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,tx.render(this.render,!1,!0))};let{latestValues:o,renderState:l,onUpdate:u}=n;this.onUpdate=u,this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=nX(t),this.isVariantNode=nG(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:d,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(let e in h){let t=h[e];void 0!==o[e]&&tA(t)&&t.set(o[e],!1)}}mount(e){this.current=e,aS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),aj.current||function(){if(aj.current=!0,nJ){if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ak.current=e.matches;e.addListener(t),t()}else ak.current=!1}}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||ak.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in aS.delete(this.current),this.projection&&this.projection.unmount(),ty(this.notifyUpdate),ty(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){let r;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let i=td.has(e),s=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&tx.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),n=t.on("renderRequest",this.scheduleRender);window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),n(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in n1){let t=n1[e];if(!t)continue;let{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):so()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<aM.length;t++){let r=aM[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(e,t,r){for(let i in t){let s=t[i],n=r[i];if(tA(s))e.addValue(i,s);else if(tA(n))e.addValue(i,tD(s,{owner:e}));else if(n!==s){if(e.hasValue(i)){let t=e.getValue(i);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{let t=e.getStaticValue(i);e.addValue(i,tD(void 0!==t?t:s,{owner:e}))}}}for(let i in r)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=tD(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=void 0===this.latestValues[e]&&this.current?null!==(r=this.getBaseTargetFromProps(this.props,e))&&void 0!==r?r:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=i&&("string"==typeof i&&(rL(i)||tZ(i))?i=parseFloat(i):!aN(i)&&rm.test(t)&&(i=rk(e,t)),this.setBaseTarget(e,tA(i)?i.get():i)),tA(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;let r;let{initial:i}=this.props;if("string"==typeof i||"object"==typeof i){let s=eI(this.props,i,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);s&&(r=s[e])}if(i&&void 0!==r)return r;let s=this.getBaseTargetFromProps(this.props,e);return void 0===s||tA(s)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new tN),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class aD extends aP{constructor(){super(...arguments),this.KeyframeResolver=rZ}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;tA(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class aA extends aD{constructor(){super(...arguments),this.type="html",this.renderInstance=au}readValueFromInstance(e,t){if(td.has(t)){let e=rw(t);return e&&e.default||0}{let r=window.getComputedStyle(e),i=(rB(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return sb(e,t)}build(e,t,r){at(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return am(e,t,r)}}class aC extends aD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=so}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(td.has(t)){let e=rw(t);return e&&e.default||0}return t=ad.has(t)?t:tE(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return ap(e,t,r)}build(e,t,r){an(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){ah(e,t,r,i)}mount(e){this.isSVGTag=al(e.tagName),super.mount(e)}}let aE=function(e){if("undefined"==typeof Proxy)return e;let t=new Map;return new Proxy((...t)=>e(...t),{get:(r,i)=>"create"===i?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}((s={animation:{Feature:iz},exit:{Feature:iZ},inView:{Feature:nZ},tap:{Feature:nI},focus:{Feature:nB},hover:{Feature:nF},pan:{Feature:sM},drag:{Feature:sN,ProjectionNode:nV,MeasureLayout:sO},layout:{ProjectionNode:nV,MeasureLayout:sO}},n=(e,t)=>n3(e)?new aC(t):new aA(t,{allowProjection:e!==o.Fragment}),function(e,{forwardMotionProps:t}={forwardMotionProps:!1}){return function({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:i,Component:s}){var n,l;function u(e,n){var l;let u;let d={...(0,o.useContext)(nH),...e,layoutId:function({layoutId:e}){let t=(0,o.useContext)(sA).id;return t&&void 0!==e?t+"-"+e:e}(e)},{isStatic:h}=d,c=function(e){let{initial:t,animate:r}=function(e,t){if(nX(e)){let{initial:t,animate:r}=e;return{initial:!1===t||eB(t)?t:void 0,animate:eB(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,o.useContext)(nY));return(0,o.useMemo)(()=>({initial:t,animate:r}),[nQ(t),nQ(r)])}(e),m=i(e,h);if(!h&&nJ){(0,o.useContext)(nK).strict;let e=function(e){let{drag:t,layout:r}=n1;if(!t&&!r)return{};let i={...t,...r};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==r?void 0:r.isEnabled(e))?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(d);u=e.MeasureLayout,c.visualElement=function(e,t,r,i,s){var n,a;let{visualElement:l}=(0,o.useContext)(nY),u=(0,o.useContext)(nK),d=(0,o.useContext)(sP),h=(0,o.useContext)(nH).reducedMotion,c=(0,o.useRef)(null);i=i||u.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:l,props:r,presenceContext:d,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:h}));let m=c.current,p=(0,o.useContext)(sC);m&&!m.projection&&s&&("html"===m.type||"svg"===m.type)&&function(e,t,r,i){let{layoutId:s,layout:n,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:s,layout:n,alwaysMeasureLayout:!!a||o&&i4(o),visualElement:e,animationType:"string"==typeof n?n:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:u})}(c.current,r,s,p);let f=(0,o.useRef)(!1);(0,o.useInsertionEffect)(()=>{m&&f.current&&m.update(r,d)});let g=r[t_],x=(0,o.useRef)(!!g&&!(null===(n=window.MotionHandoffIsComplete)||void 0===n?void 0:n.call(window,g))&&(null===(a=window.MotionHasOptimisedAnimation)||void 0===a?void 0:a.call(window,g)));return n4(()=>{m&&(f.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),sL.render(m.render),x.current&&m.animationState&&m.animationState.animateChanges())}),(0,o.useEffect)(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)}),x.current=!1))}),m}(s,m,d,t,e.ProjectionNode)}return(0,a.jsxs)(nY.Provider,{value:c,children:[u&&c.visualElement?(0,a.jsx)(u,{visualElement:c.visualElement,...d}):null,r(s,e,(l=c.visualElement,(0,o.useCallback)(e=>{e&&m.onMount&&m.onMount(e),l&&(e?l.mount(e):l.unmount()),n&&("function"==typeof n?n(e):i4(n)&&(n.current=e))},[l])),m,h,c.visualElement)]})}e&&function(e){for(let t in e)n1[t]={...n1[t],...e[t]}}(e),u.displayName=`motion.${"string"==typeof s?s:`create(${null!==(l=null!==(n=s.displayName)&&void 0!==n?n:s.name)&&void 0!==l?l:""})`}`;let d=(0,o.forwardRef)(u);return d[n2]=s,d}({...n3(e)?ag:ax,preloadedFeatures:s,useRender:function(e=!1){return(t,r,i,{latestValues:s},n)=>{let a=(n3(t)?function(e,t,r,i){let s=(0,o.useMemo)(()=>{let r=ao();return an(r,t,al(i),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};ay(t,e.style,e),s.style={...t,...s.style}}return s}:function(e,t){let r={},i=function(e,t){let r=e.style||{},i={};return ay(i,r,e),Object.assign(i,function({transformTemplate:e},t){return(0,o.useMemo)(()=>{let r=aa();return at(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),i}(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r})(r,s,n,t),l=function(e,t,r){let i={};for(let s in e)("values"!==s||"object"!=typeof e.values)&&(aw(s)||!0===r&&ab(s)||!t&&!ab(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}(r,"string"==typeof t,e),u=t!==o.Fragment?{...l,...a,ref:i}:{},{children:d}=r,h=(0,o.useMemo)(()=>tA(d)?d.get():d,[d]);return(0,o.createElement)(t,{...u,children:h})}}(t),createVisualElement:n,Component:e})}));var a_=r(82066),aR=r(29280);let aV=(0,eg.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var aL=r(31855),aF=r(65249);let aB=(0,eg.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function aO(e){return e?new Date(e+"T12:00:00").toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"}):""}function aI({sheetData:e,onChange:t,readOnly:r=!1}){let i=(0,o.useRef)(null),[s,n]=(0,o.useState)(!1),[l,u]=(0,o.useState)(""),h=(r,i)=>{t({...e,[r]:i})},c=e.driver_type||"solo",p=!!e.last_24h_break?.trim(),{data:g=[]}=(0,d.a)({queryKey:["drivers"],queryFn:()=>m.h.drivers.list()}),x=g.filter(e=>e.is_active);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(eT._,{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold mr-2",children:"Driver Type"}),(0,a.jsxs)("div",{className:"flex rounded-lg border border-slate-200 dark:border-slate-600 overflow-hidden",children:[a.jsx("button",{type:"button",disabled:r,onClick:()=>h("driver_type","solo"),className:`px-4 py-1.5 text-xs font-bold transition-colors ${"solo"===c?"bg-slate-900 dark:bg-slate-600 text-white dark:text-slate-100":"bg-white dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:"Solo"}),a.jsx("button",{type:"button",disabled:r,onClick:()=>h("driver_type","two_up"),className:`px-4 py-1.5 text-xs font-bold transition-colors border-l border-slate-200 dark:border-slate-600 ${"two_up"===c?"bg-slate-900 dark:bg-slate-600 text-white dark:text-slate-100":"bg-white dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:"Two-Up"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)(eT._,{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold flex items-center gap-1.5",children:[a.jsx(aV,{className:"w-3 h-3"})," Driver Name"]}),x.length>0?(0,a.jsxs)(aR.Ph,{value:e.driver_name||"",onValueChange:e=>h("driver_name",e),disabled:r,children:[a.jsx(aR.i4,{className:"h-9 font-medium",children:a.jsx(aR.ki,{placeholder:"Select driver"})}),a.jsx(aR.Bw,{children:x.map(e=>a.jsx(aR.Ql,{value:e.name,children:e.name},e.id))})]}):a.jsx(ej.I,{value:e.driver_name||"",onChange:e=>h("driver_name",e.target.value),placeholder:"Full name (no drivers added yet)",className:"h-9 font-medium",disabled:r})]}),"two_up"===c&&(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)(eT._,{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold flex items-center gap-1.5",children:[a.jsx(aL.Z,{className:"w-3 h-3"})," Second Driver *"]}),x.length>0?(0,a.jsxs)(aR.Ph,{value:e.second_driver??"",onValueChange:e=>h("second_driver",e),disabled:r,children:[a.jsx(aR.i4,{className:"h-9 border-amber-300",children:a.jsx(aR.ki,{placeholder:"Required for Two-Up"})}),(0,a.jsxs)(aR.Bw,{children:[a.jsx(aR.Ql,{value:"",children:" None "}),x.map(e=>a.jsx(aR.Ql,{value:e.name,children:e.name},e.id))]})]}):a.jsx(ej.I,{value:e.second_driver||"",onChange:e=>h("second_driver",e.target.value),placeholder:"Required for Two-Up",className:"h-9 border-amber-300 focus:border-amber-400",disabled:r})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)(eT._,{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold flex items-center gap-1.5",children:[a.jsx(aF.Z,{className:"w-3 h-3"})," Destination"]}),a.jsx(ej.I,{value:e.destination||"",onChange:e=>h("destination",e.target.value),placeholder:"Destination",className:"h-9",disabled:r})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[a.jsx(eT._,{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold",children:"Last 24 Hour Break"}),p?(0,a.jsxs)("div",{className:"h-9 flex flex-col justify-center rounded-md border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-3",children:[a.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200 font-mono",children:aO(e.last_24h_break)}),a.jsx("p",{className:"text-[10px] text-slate-400 dark:text-slate-500",children:"Locked for this sheet"})]}):(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{ref:i,type:"date",className:"absolute opacity-0 w-0 h-0 pointer-events-none","aria-hidden":!0,defaultValue:e.week_starting||"",onChange:e=>{let t=e.target.value;t&&(u(t),n(!0))}}),(0,a.jsxs)(f.z,{type:"button",variant:"outline",size:"sm",disabled:r,onClick:()=>i.current?.showPicker?.()??i.current?.click(),className:"h-9 w-full justify-start gap-2 border-amber-300 dark:border-amber-700 bg-amber-50 dark:bg-amber-900/40 text-amber-800 dark:text-amber-200 hover:bg-amber-100 dark:hover:bg-amber-800/50 hover:border-amber-400 dark:hover:border-amber-600 font-medium",children:[a.jsx(aB,{className:"w-4 h-4 text-amber-600"}),"Set last 24h break"]}),a.jsx(W,{open:s,onOpenChange:e=>{n(e),e||u("")},children:(0,a.jsxs)(ev,{className:"sm:max-w-sm",children:[(0,a.jsxs)(eb,{children:[a.jsx(ew,{children:"Confirm last 24 hour break"}),a.jsx(ek,{children:"Set this date as your last 24 hour break? Once set, it cannot be changed for this sheet."})]}),l&&a.jsx("p",{className:"text-sm font-medium text-slate-800 font-mono",children:aO(l)}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end pt-2",children:[a.jsx(f.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{n(!1),u("")},children:"Cancel"}),a.jsx(f.z,{type:"button",size:"sm",onClick:()=>{h("last_24h_break",l),n(!1),u("")},className:"bg-slate-900 hover:bg-slate-800",children:"Confirm"})]})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[a.jsx(eT._,{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold",children:"Week Starting"}),a.jsx(ej.I,{type:"date",value:e.week_starting||"",onChange:e=>h("week_starting",e.target.value),className:"h-9 font-mono",disabled:r})]})]})]})}var a$=r(71266),aU=r(46015),aW=r(29668);function az(e){let t=(0,aW._P)();if(e>t)return 0;if(e<t)return 1440;let r=new Date(e+"T00:00:00").getTime();return Math.min(1440,Math.ceil((Date.now()-r)/6e4))}function aq(e,t){if(!e||e.length<48)return[];let r=[],i=null;for(let s=0;s<48;s++){let n=30*s,a=(s+1)*30,o=!!e[s];o&&null===i&&(i=n),o||null===i||(r.push({startMin:i,endMin:Math.min(n,t)}),i=null),o&&47===s&&r.push({startMin:i,endMin:Math.min(a,t)})}return r}function aZ(e,t){let r={work_time:[],breaks:[],non_work:[]},i=new Date(t+"T00:00:00").getTime(),s=new Date(t+"T23:59:59").getTime(),n=az(t);if(!e?.length)return n>0&&(r.non_work=[{startMin:0,endMin:n}]),r;let a=[];for(let t=0;t<e.length;t++){let o=e[t],l=e[t+1];if("stop"===o.type)continue;let u=Math.min(l?new Date(l.time).getTime():Date.now(),s),d=Math.max(new Date(o.time).getTime(),i);if(d>=u)continue;let h=Math.floor((d-i)/6e4),c=Math.ceil((u-i)/6e4);if(h>=(c=Math.min(c,n)))continue;let m=c-h,p="break"===o.type&&null!=l&&m<10;"work"===o.type||p?(r.work_time.push({startMin:h,endMin:c}),a.push({startMin:h,endMin:c})):"break"===o.type&&(r.breaks.push({startMin:h,endMin:c}),a.push({startMin:h,endMin:c}))}return n>0&&(r.non_work=function(e,t){if(0===e.length)return[{startMin:0,endMin:t}];let r=[...e].sort((e,t)=>e.startMin-t.startMin),i=[];for(let e of r){let t=i[i.length-1];t&&e.startMin<=t.endMin?t.endMin=Math.max(t.endMin,e.endMin):i.push({startMin:e.startMin,endMin:e.endMin})}let s=[],n=0;for(let e of i)e.startMin>n&&s.push({startMin:n,endMin:e.startMin}),n=Math.max(n,e.endMin);return n<t&&s.push({startMin:n,endMin:t}),s}(a,n)),r}function aK({dayData:e}){let t=e.events||[],r=e.date||(0,aW._P)(),i=az(r),s=null!=e.work_time&&null!=e.breaks&&null!=e.non_work,n=t.length>0?aZ(t,r):s?{work_time:aq(e.work_time.map((t,r)=>t&&!e.breaks[r]),1440),breaks:aq(e.breaks,1440),non_work:aq(e.non_work,i)}:aZ(t,r),o=Array.from({length:13},(e,t)=>2*t);return(0,a.jsxs)("div",{className:"select-none",children:[a.jsx("div",{className:"relative h-4 mb-1",style:{marginLeft:72},children:o.map(e=>a.jsx("span",{className:"absolute text-[9px] font-mono text-slate-300 dark:text-slate-500 -translate-x-1/2",style:{left:`${e/24*100}%`},children:String(e).padStart(2,"0")},e))}),a.jsx("div",{className:"space-y-1.5",children:aU.t.map(e=>{let t=n[e.key],r=t.reduce((e,t)=>e+(t.endMin-t.startMin),0);return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-[68px] shrink-0 text-[10px] font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wide text-right",children:e.label}),(0,a.jsxs)("div",{className:"relative flex-1 h-5 bg-slate-100 dark:bg-slate-700 rounded overflow-hidden",children:[t.map((t,r)=>a.jsx("div",{className:"absolute top-0 h-full rounded-sm opacity-90",style:{left:`${t.startMin/1440*100}%`,width:`${Math.max((t.endMin-t.startMin)/1440*100,.2)}%`,backgroundColor:e.color}},r)),o.slice(1,-1).map(e=>a.jsx("div",{className:"absolute top-0 h-full border-l border-white/40 pointer-events-none",style:{left:`${e/24*100}%`}},e))]}),a.jsx("span",{className:"w-14 shrink-0 text-right text-[11px] font-bold font-mono text-slate-600 dark:text-slate-300",children:r>0?function(e){let t=Math.floor(e/60),r=e%60;return 0===r?`${t}h`:`${t}h ${r}m`}(r):a.jsx("span",{className:"text-slate-300 dark:text-slate-500",children:""})})]},e.key)})})]})}let aH=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function aY({dayIndex:e,dayData:t,onUpdate:r,weekStart:i,regos:s=[],readOnly:n=!1}){let o=(i,s)=>{r(e,{...t,[i]:s})},l=null!=t.end_kms&&null!=t.start_kms?Math.max(0,t.end_kms-t.start_kms):0;return(0,a.jsxs)(aE.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.04*e},className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm p-3 md:p-5",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-900 dark:bg-slate-600 text-white dark:text-slate-200 flex items-center justify-center text-xs font-bold",children:aH[e]?.charAt(0)}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:aH[e]}),a.jsx("p",{className:"text-[11px] text-slate-400 dark:text-slate-500 font-mono",children:(()=>{if(!i)return"";let t=new Date(i);return t.setDate(t.getDate()+e),t.toLocaleDateString("en-AU",{day:"2-digit",month:"2-digit",year:"numeric"})})()})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 ml-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[a.jsx(a$.Z,{className:"w-3.5 h-3.5 text-slate-400 dark:text-slate-500 shrink-0"}),(0,a.jsxs)(aR.Ph,{value:t.truck_rego?.trim()||"__none__",onValueChange:e=>o("truck_rego","__none__"===e?"":e),disabled:n,children:[a.jsx(aR.i4,{className:"w-28 h-7 text-xs font-mono px-2 [&>span]:line-clamp-1",children:a.jsx(aR.ki,{placeholder:"Rego"})}),(0,a.jsxs)(aR.Bw,{children:[a.jsx(aR.Ql,{value:"__none__",className:"text-slate-400 font-mono",children:" Select rego "}),(()=>{let e=s.map(e=>e.label),r=t.truck_rego?.trim();return r&&!e.includes(r)&&e.unshift(r),e.map(e=>a.jsx(aR.Ql,{value:e,className:"font-mono",children:e},e))})()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[a.jsx(aF.Z,{className:"w-3.5 h-3.5 text-slate-400 dark:text-slate-500"}),a.jsx(ej.I,{placeholder:"Destination",value:t.destination||"",onChange:e=>o("destination",e.target.value),className:"w-32 min-w-[8rem] h-7 text-xs",disabled:n})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)(eT._,{className:"text-[10px] text-slate-400 dark:text-slate-500 uppercase",children:["Start km",t.truck_rego?.trim()?" *":""]}),a.jsx(ej.I,{type:"number",placeholder:"0",value:t.start_kms??"",onChange:e=>o("start_kms",e.target.value?Number(e.target.value):null),className:"w-20 h-7 text-xs font-mono",disabled:n})]}),l>0&&(0,a.jsxs)("span",{className:"text-[10px] font-mono text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800 px-2 py-0.5 rounded",children:[l," km"]})]})]}),a.jsx(aK,{dayData:{...t,date:i?(0,aW.uQ)(i,e):(0,aW._P)()}})]})}var aX=r(40666);let aG=(0,eg.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var aQ=r(55947);let aJ=(0,eg.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),a0=(0,eg.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);class a1 extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function a2({children:e,isPresent:t}){let r=(0,o.useId)(),i=(0,o.useRef)(null),s=(0,o.useRef)({width:0,height:0,top:0,left:0}),{nonce:n}=(0,o.useContext)(nH);return(0,o.useInsertionEffect)(()=>{let{width:e,height:a,top:o,left:l}=s.current;if(t||!i.current||!e||!a)return;i.current.dataset.motionPopId=r;let u=document.createElement("style");return n&&(u.nonce=n),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            top: ${o}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),(0,a.jsx)(a1,{isPresent:t,childRef:i,sizeRef:s,children:o.cloneElement(e,{ref:i})})}let a4=({children:e,initial:t,isPresent:r,onExitComplete:i,custom:s,presenceAffectsLayout:n,mode:l})=>{let u=n6(a5),d=(0,o.useId)(),h=(0,o.useCallback)(e=>{for(let t of(u.set(e,!0),u.values()))if(!t)return;i&&i()},[u,i]),c=(0,o.useMemo)(()=>({id:d,initial:t,isPresent:r,custom:s,onExitComplete:h,register:e=>(u.set(e,!1),()=>u.delete(e))}),n?[Math.random(),h]:[r,h]);return(0,o.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[r]),o.useEffect(()=>{r||u.size||!i||i()},[r]),"popLayout"===l&&(e=(0,a.jsx)(a2,{isPresent:r,children:e})),(0,a.jsx)(sP.Provider,{value:c,children:e})};function a5(){return new Map}let a3=e=>e.key||"";function a6(e){let t=[];return o.Children.forEach(e,e=>{(0,o.isValidElement)(e)&&t.push(e)}),t}let a8=({children:e,custom:t,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:n="sync",propagate:l=!1})=>{let[u,d]=sD(l),h=(0,o.useMemo)(()=>a6(e),[e]),c=l&&!u?[]:h.map(a3),m=(0,o.useRef)(!0),p=(0,o.useRef)(h),f=n6(()=>new Map),[g,x]=(0,o.useState)(h),[y,v]=(0,o.useState)(h);n4(()=>{m.current=!1,p.current=h;for(let e=0;e<y.length;e++){let t=a3(y[e]);c.includes(t)?f.delete(t):!0!==f.get(t)&&f.set(t,!1)}},[y,c.length,c.join("-")]);let b=[];if(h!==g){let e=[...h];for(let t=0;t<y.length;t++){let r=y[t],i=a3(r);c.includes(i)||(e.splice(t,0,r),b.push(r))}"wait"===n&&b.length&&(e=b),v(a6(e)),x(h);return}let{forceRender:w}=(0,o.useContext)(sA);return(0,a.jsx)(a.Fragment,{children:y.map(e=>{let o=a3(e),g=(!l||!!u)&&(h===y||c.includes(o));return(0,a.jsx)(a4,{isPresent:g,initial:(!m.current||!!r)&&void 0,custom:g?void 0:t,presenceAffectsLayout:s,mode:n,onExitComplete:g?void 0:()=>{if(!f.has(o))return;f.set(o,!0);let e=!0;f.forEach(t=>{t||(e=!1)}),e&&(null==w||w(),v(p.current),l&&(null==d||d()),i&&i())},children:e},o)})})};function a9(e){return(e?.filter(Boolean).length??0)/2}let a7=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function oe(e,t,r){if("14-day"===e)return"in the last 14 days";let i=r&&e.match(/^prev\+(\d+)$/);if(i){let e=parseInt(i[1],10);return ot((0,aW.uQ)(r,4+e))}let s=a7.indexOf(e);return s>=0&&t?ot((0,aW.uQ)(t,s)):e}function ot(e){return new Date(e+"T12:00:00").toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"})}let or={Coffee:aX.Z,AlertTriangle:aG,Moon:aQ.Z,Clock:aJ,TrendingUp:a0,CheckCircle2:eD.Z};function oi({days:e,driverType:t,prevWeekDays:r,weekStarting:i,prevWeekStarting:s,complianceResults:n,complianceLoading:o}){let l=n??[],u=l.filter(e=>"violation"===e.type),d=l.filter(e=>"warning"===e.type),h=e.reduce((e,t)=>e+a9(t.work_time),0),c=e.reduce((e,t)=>e+a9(t.breaks),0),m=e.reduce((e,t)=>e+a9(t.non_work),0),p=(r||[]).reduce((e,t)=>e+a9(t.work_time),0),f="two_up"===t;return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold ${f?"bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-200":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:f?"\uD83D\uDC65 Two-Up Rules":"\uD83D\uDC64 Solo Rules"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{className:`rounded-lg p-3 text-center ${aU.N.work.statsCard}`,children:[a.jsx("p",{className:`text-[10px] uppercase tracking-wider font-semibold ${aU.N.work.statsLabel}`,children:"Work"}),(0,a.jsxs)("p",{className:`text-xl font-bold font-mono ${aU.N.work.statsValue}`,children:[h,"h"]}),r&&r.length>0&&(0,a.jsxs)("p",{className:"text-[10px] text-blue-400 font-mono",children:["14d: ",h+p,"h"]})]}),(0,a.jsxs)("div",{className:`rounded-lg p-3 text-center ${aU.N.break.statsCard}`,children:[a.jsx("p",{className:`text-[10px] uppercase tracking-wider font-semibold ${aU.N.break.statsLabel}`,children:"Breaks"}),(0,a.jsxs)("p",{className:`text-xl font-bold font-mono ${aU.N.break.statsValue}`,children:[c,"h"]})]}),(0,a.jsxs)("div",{className:`rounded-lg p-3 text-center ${aU.N.rest.statsCard}`,children:[a.jsx("p",{className:`text-[10px] uppercase tracking-wider font-semibold ${aU.N.rest.statsLabel}`,children:"Non-Work Time"}),a.jsx("p",{className:"text-[9px] text-slate-400 mt-0.5",children:"all time not work or break"}),(0,a.jsxs)("p",{className:`text-xl font-bold font-mono ${aU.N.rest.statsValue}`,children:[m,"h"]})]})]}),(0,a.jsxs)("div",{className:`rounded-lg p-2.5 ${aU.N.rest.statsCard} border border-emerald-100 dark:border-emerald-800`,children:[a.jsx("p",{className:"text-[10px] uppercase tracking-wider font-semibold text-emerald-600 dark:text-emerald-400 mb-1.5",children:"Non-Work Time rules"}),(0,a.jsxs)("ul",{className:"space-y-0.5 text-[11px] text-slate-600 dark:text-slate-400",children:[a.jsx("li",{children:" All time not logged as work or break is counted as non-work time."}),a.jsx("li",{children:" Starts when no shift is live, but only after the 24 hour break is set, and only before the current date and time."}),a.jsx("li",{children:" Retrospective only  never shown or recorded after the current time on any day or shift."}),a.jsx("li",{children:" End Shift sets recording to non-work; no separate button needed."})]})]}),r&&r.length>0&&a.jsx("p",{className:"text-[10px] text-slate-400 italic",children:" Previous week's sheet linked for 14-day checks"}),(!r||0===r.length)&&a.jsx("p",{className:"text-[10px] text-slate-300 italic",children:"No previous week sheet found  14-day check is partial"}),o&&(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg p-3",children:[a.jsx(eN.Z,{className:"w-5 h-5 text-slate-500 dark:text-slate-400 shrink-0 animate-spin"}),a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Checking compliance"})]}),!o&&n&&0===l.length&&(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-emerald-50 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-800 rounded-lg p-3",children:[a.jsx(eD.Z,{className:"w-5 h-5 text-emerald-500 dark:text-emerald-400 shrink-0"}),a.jsx("span",{className:"text-sm font-medium text-emerald-700 dark:text-emerald-200",children:"All compliant  no issues detected"})]}),a.jsx(a8,{children:u.length>0&&(0,a.jsxs)(aE.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-1.5",children:[(0,a.jsxs)("p",{className:"text-[10px] uppercase tracking-wider text-red-500 dark:text-red-400 font-bold",children:["Violations (",u.length,")"]}),u.map((e,t)=>{let r=or[e.iconKey];return(0,a.jsxs)("div",{className:"flex items-start gap-2 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-2.5",children:[r&&a.jsx(r,{className:"w-4 h-4 text-red-500 dark:text-red-400 mt-0.5 shrink-0"}),(0,a.jsxs)("p",{className:"text-xs text-red-700 dark:text-red-200",children:[e.message,"  ",oe(e.day,i,s)]})]},t)})]})}),a.jsx(a8,{children:d.length>0&&(0,a.jsxs)(aE.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-1.5",children:[(0,a.jsxs)("p",{className:"text-[10px] uppercase tracking-wider text-amber-500 dark:text-amber-400 font-bold",children:["Warnings (",d.length,")"]}),d.map((e,t)=>{let r=or[e.iconKey];return(0,a.jsxs)("div",{className:"flex items-start gap-2 bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-800 rounded-lg p-2.5",children:[r&&a.jsx(r,{className:"w-4 h-4 text-amber-500 dark:text-amber-400 mt-0.5 shrink-0"}),(0,a.jsxs)("p",{className:"text-xs text-amber-700 dark:text-amber-200",children:[e.message,e.message.includes("72h window ending")?"":`  ${oe(e.day,i,s)}`]})]},t)})]})}),(0,a.jsxs)("div",{className:"pt-2 border-t border-slate-100 dark:border-slate-700",children:[(0,a.jsxs)("p",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold mb-2",children:["WA OSH Reg 3.132  ",f?"Two-Up":"Solo"," Rules"]}),f?(0,a.jsxs)("ul",{className:"space-y-1 text-[11px] text-slate-500 dark:text-slate-400",children:[a.jsx("li",{children:" 20 min break for ea 5 hours work time - 10 min minimum x 2"}),a.jsx("li",{children:" 7 hrs non-work in any rolling 24 hrs (can be in moving vehicle)"}),a.jsx("li",{children:" 1 block of 7 continuous hrs non-work in any rolling 48 hrs (not in moving vehicle)"}),a.jsx("li",{children:" 48 hrs non-work per 7 days (incl. 24 continuous hrs)"}),a.jsx("li",{children:" Max 168 hrs work in any 14-day period (rolling; resets after 48h continuous non-work)"})]}):(0,a.jsxs)("ul",{className:"space-y-1 text-[11px] text-slate-500 dark:text-slate-400",children:[a.jsx("li",{children:" 20 min break for ea 5 hours work time - 10 min minimum x 2"}),a.jsx("li",{children:" 7 continuous hrs non-work time required"}),a.jsx("li",{children:" Max 17 hrs elapsed time between 7-hr rest breaks (24h non-work resets)"}),a.jsx("li",{children:" 27 hrs non-work in any rolling 72 hrs (incl. 3\xd7 7hr blocks; 24h non-work resets)"}),a.jsx("li",{children:" Max 168 hrs work in any 14-day period (rolling; resets after 48h continuous non-work)"})]})]})]})}let os=(0,eg.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),on=(0,eg.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function oa({open:e,onConfirm:t,onCancel:r,driverName:i}){let s=(0,o.useRef)(null),[n,l]=(0,o.useState)(!1),[u,d]=(0,o.useState)(!1),h=(0,o.useRef)(null),c=(e,t)=>{let r=t.getBoundingClientRect(),i=t.width/r.width,s=t.height/r.height;return"touches"in e?{x:(e.touches[0].clientX-r.left)*i,y:(e.touches[0].clientY-r.top)*s}:{x:(e.clientX-r.left)*i,y:(e.clientY-r.top)*s}},m=e=>{e.preventDefault();let t=s.current;t&&(h.current=c(e,t),l(!0))},p=e=>{if(e.preventDefault(),!n||!h.current)return;let t=s.current;if(!t)return;let r=t.getContext("2d");if(!r)return;let i=c(e,t);r.beginPath(),r.moveTo(h.current.x,h.current.y),r.lineTo(i.x,i.y),r.strokeStyle="#1e293b",r.lineWidth=2.5,r.lineCap="round",r.lineJoin="round",r.stroke(),h.current=i,d(!0)},g=e=>{e?.preventDefault(),l(!1),h.current=null};return a.jsx(W,{open:e,onOpenChange:e=>{e||r()},children:(0,a.jsxs)(ev,{className:"max-w-md",children:[(0,a.jsxs)(eb,{children:[(0,a.jsxs)(ew,{className:"flex items-center gap-2",children:[a.jsx(os,{className:"w-4 h-4"})," Driver Signature"]}),a.jsx(ek,{children:i?`${i}  please sign below to confirm this weekly record is accurate.`:"Please sign below to confirm this weekly record is accurate."})]}),(0,a.jsxs)("div",{className:"border-2 border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden bg-white dark:bg-slate-800 relative",style:{touchAction:"none"},children:[a.jsx("canvas",{ref:s,width:460,height:160,className:"w-full h-40 cursor-crosshair",onMouseDown:m,onMouseMove:p,onMouseUp:g,onMouseLeave:()=>g(),onTouchStart:m,onTouchMove:p,onTouchEnd:g}),!u&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("span",{className:"text-slate-300 text-sm font-medium select-none",children:"Sign here"})}),a.jsx("div",{className:"absolute bottom-8 left-6 right-6 border-b border-dashed border-slate-300 pointer-events-none"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsxs)(f.z,{variant:"ghost",size:"sm",onClick:()=>{let e=s.current;if(!e)return;let t=e.getContext("2d");t&&(t.clearRect(0,0,e.width,e.height),d(!1))},className:"text-slate-500 gap-1",children:[a.jsx(on,{className:"w-3.5 h-3.5"})," Clear"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(f.z,{variant:"outline",size:"sm",onClick:r,children:"Cancel"}),(0,a.jsxs)(f.z,{size:"sm",onClick:()=>{let e=s.current;e&&t(e.toDataURL("image/png"))},disabled:!u,className:"bg-emerald-600 hover:bg-emerald-700 text-white gap-1",children:[a.jsx(eD.Z,{className:"w-3.5 h-3.5"}),"Confirm & Complete"]})]})]}),a.jsx("p",{className:"text-[10px] text-slate-400 text-center -mt-1",children:"By signing, the driver confirms this record is true and correct  WA Heavy Vehicle National Law"})]})})}var oo=r(24635),ol=r(42718);let ou={work:oo.Z,break:aX.Z,rest:aQ.Z,stop:eR.Z},od={work:"Work",break:"Break",rest:"Rest",stop:"End Shift"},oh=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function oc({days:e,currentDayIndex:t,weekStarting:r,onLogEvent:i,onEndShiftRequest:s,leadingIcon:n,workRelevantComplianceMessages:u}){let[d,h]=(0,o.useState)(null),[c,m]=(0,o.useState)(null),p=(0,o.useRef)(null),[,f]=(0,o.useState)(0),g=e[t],x=g?.events||[],y=x[x.length-1],v=y&&"stop"!==y.type?y.type:null,b=v&&y?Math.floor((Date.now()-new Date(y.time).getTime())/6e4):0,w=v&&"stop"!==v?"work"===v?{type:"work",elapsed:b,target:300,pct:Math.min(100,b/300*100),remaining:Math.max(0,300-b),color:aU.N.work.hex,label:"5h"}:"break"===v?{type:"break",elapsed:b,target:20,pct:Math.min(100,b/20*100),remaining:Math.max(0,20-b),color:aU.N.break.hex,label:"20m"}:null:null,k=(()=>{if(!r)return oh[t];let e=new Date(r);return e.setDate(e.getDate()+t),e.toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"})})(),j=(()=>{if(!r)return oh[t];let e=new Date(r);return e.setDate(e.getDate()+t),e.toLocaleDateString("en-AU",{day:"numeric",month:"short"})})(),T=(0,o.useCallback)(()=>{p.current&&(clearTimeout(p.current),p.current=null),h(null)},[]),N=e=>{if("work"!==e)return null;let t=[];for(let e=x.length-1;e>=0&&"break"===x[e].type;e--){let r=e+1<x.length?new Date(x[e+1].time).getTime():Date.now(),i=new Date(x[e].time).getTime();t.unshift(Math.floor((r-i)/6e4))}let r=t.reduce((e,t)=>e+t,0),i=t.filter(e=>e>=10).length;return r<20||i<1?"20 min break for ea 5 hours work time - 10 min minimum x 2":null},S=e=>{if("work"!==e||"break"!==v||!y)return null;let t=new Date(y.time).getTime();return Math.floor((Date.now()-t)/6e4)>=10?null:"Breaks under 10 minutes are automatically counted as work time."},M=()=>{if(null!==v&&"stop"!==v)return null;let r=null;for(let i=0;i<=t;i++)for(let t of e[i]?.events??[])if("stop"===t.type){let e=new Date(t.time).getTime();(null===r||e>r)&&(r=e)}return null===r||(Date.now()-r)/36e5>=7?null:"Less than 7 hours non-work time since last shift. Starting work may not meet rest requirements."},P=e=>{if(e!==v){if(d===e){if("work"===e){let r=N(e);if(r){m({message:r,confirmLabel:"Log work anyway",subtext:"This will log work now.",onConfirm:()=>{m(null),T(),i(t,e)},onCancel:T});return}}if(T(),"stop"===e&&s){s(t);return}i(t,e);return}if("work"===e){let t=S(e);if(t){m({message:t,confirmLabel:"Finish break anyway",subtext:"Tap Work again within a few seconds to confirm.",onConfirm:()=>{m(null),h("work"),p.current&&clearTimeout(p.current),p.current=setTimeout(T,2500)}});return}let r=M();if(r){m({message:r,confirmLabel:"Start shift anyway",subtext:"Tap Work again within a few seconds to confirm.",onConfirm:()=>{m(null),h("work"),p.current&&clearTimeout(p.current),p.current=setTimeout(T,2500)}});return}if(u?.length){m({message:1===u.length?u[0]:"Logging work now may affect these compliance rules:\n\n "+u.join("\n\n "),confirmLabel:null===v||"stop"===v?"Start shift anyway":"Log work anyway",subtext:"Tap Work again within a few seconds to confirm.",onConfirm:()=>{m(null),h("work"),p.current&&clearTimeout(p.current),p.current=setTimeout(T,2500)}});return}}h(e),p.current&&clearTimeout(p.current),p.current=setTimeout(T,2500)}},D=(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-0.5 text-base min-w-0",children:[null!=n&&a.jsx("span",{className:"flex items-center justify-center text-slate-500 dark:text-slate-400 shrink-0","aria-hidden":!0,children:n}),a.jsx("span",{className:"text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500 font-semibold shrink-0",children:"Today"}),(0,a.jsxs)("span",{className:"font-bold text-slate-800 dark:text-slate-100 tabular-nums shrink-0",children:[a.jsx("span",{className:"hidden sm:inline",children:k}),a.jsx("span",{className:"sm:hidden",children:j})]}),v&&(0,a.jsxs)("span",{className:"text-slate-500 dark:text-slate-400 shrink-0",children:[a.jsx("span",{className:"hidden sm:inline",children:" current activity: "}),a.jsx("span",{className:"sm:hidden",children:"\xb7 "}),a.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v})]})]}),a.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-3 shrink-0",children:[(()=>{let e="work"===v?"break":"work",t=d===e,r=aU.N[e],i="work"===e&&(null===v||"stop"===v)?"Start shift":od[e];return(0,a.jsxs)("button",{type:"button",onClick:()=>P(e),className:`flex items-center justify-center gap-4 px-10 py-5 rounded-2xl text-white text-lg font-bold transition-all duration-150 active:scale-95 shadow-lg min-h-[64px] min-w-[180px] shrink-0 ${r.button} ${t?"ring-2 ring-white ring-offset-2 ring-offset-slate-200 dark:ring-offset-slate-800 animate-pulse":""}`,children:[l().createElement(ou[e],{className:"w-8 h-8"}),t?"Tap again to log":i]})})(),(()=>{let e="stop",t=d===e,r=v===e,i=aU.N[e],s=t?"bg-red-500 hover:bg-red-600 disabled:bg-red-300":i.button;return(0,a.jsxs)("button",{type:"button",onClick:()=>P(e),disabled:r,className:`flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-white text-xs font-bold transition-all duration-150 active:scale-95 disabled:opacity-40 disabled:cursor-not-allowed shadow-sm shrink-0 ${s} ${t?"ring-2 ring-white ring-offset-2 ring-offset-slate-200 dark:ring-offset-slate-800 animate-pulse":""}`,children:[l().createElement(ou[e],{className:"w-4 h-4"}),t?"Tap again to end shift":od[e]]})})()]})}),w&&(0,a.jsxs)("div",{className:"pt-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:[(0,a.jsxs)("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:["work"===w.type&&(()=>{let e=function(e,t){if(0===e.length)return null;let r=e[e.length-1];if("work"!==r.type)return null;let i=300,s=null;for(let r=e.length-1;r>=0;r--){let n=r===e.length-1?t:new Date(e[r+1].time).getTime(),a=Math.floor((n-new Date(e[r].time).getTime())/6e4);if("work"===e[r].type){if(i<=a){s=n-6e4*i;break}i-=a}}null==s&&(s=new Date(r.time).getTime());let n=!1;for(let r=0;r<e.length;r++){if("break"!==e[r].type)continue;let i=new Date(e[r].time).getTime(),a=r+1<e.length?new Date(e[r+1].time).getTime():t,o=Math.floor((a-i)/6e4),l=i<t&&a>s;if(o>=10&&l){n=!0;break}}return s+(300-(n?10:20))*6e4}(x,Date.now());return null!=e?`WORK  BREAK DUE BY ${new Date(e).toLocaleTimeString("en-AU",{hour:"numeric",minute:"2-digit",hour12:!0})}`:"WORK  BREAK DUE"})(),"break"===w.type&&(()=>{let e=function(e,t){if(0===e.length)return null;let r=e[e.length-1];if("break"!==r.type)return null;let i=new Date(r.time).getTime(),s=300,n=null;for(let t=e.length-1;t>=0;t--){let r=t===e.length-1?i:new Date(e[t+1].time).getTime(),a=Math.floor((r-new Date(e[t].time).getTime())/6e4);if("work"===e[t].type){if(s<=a){n=r-6e4*s;break}s-=a}}if(null==n&&e.length>=2&&(n=new Date(e[e.length-2].time).getTime()),null==n)return null;let a=!1;for(let t=0;t<e.length;t++){if("break"!==e[t].type)continue;let r=new Date(e[t].time).getTime(),s=t+1<e.length?new Date(e[t+1].time).getTime():i;if(s>i)continue;let o=Math.floor((s-r)/6e4),l=r<i&&s>n;if(o>=10&&l){a=!0;break}}return i+6e4*(a?10:20)}(x,Date.now());return null!=e?`BREAK COMPLETE BY ${new Date(e).toLocaleTimeString("en-AU",{hour:"numeric",minute:"2-digit",hour12:!0})}`:"BREAK  20 min"})()]}),a.jsx("span",{className:"text-xs font-mono text-slate-600 dark:text-slate-300 tabular-nums",children:null})]}),(0,a.jsxs)("div",{className:"relative h-8 bg-slate-100 dark:bg-slate-700 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 rounded-lg",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 rounded-lg transition-all duration-300",style:{width:`${w.pct}%`,backgroundColor:w.color}}),"work"===w.type&&[1,2,3,4].map(e=>a.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-white/60",style:{left:`${e/5*100}%`},"aria-hidden":!0},e)),"break"===w.type&&[1,2,3].map(e=>a.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-white/60",style:{left:`${e/4*100}%`},"aria-hidden":!0},e))]}),w.pct>0&&w.pct<100&&a.jsx("div",{className:"absolute top-1/2 w-2.5 h-2.5 -translate-y-1/2 -translate-x-1/2 rounded-full bg-black dark:bg-white border-2 border-slate-400 dark:border-slate-300 shadow-md pointer-events-none z-10",style:{left:`${w.pct}%`},title:"Current progress","aria-hidden":!0})]})]})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"max-w-[1400px] mx-auto px-4 py-3 invisible pointer-events-none select-none flex items-start gap-3","aria-hidden":!0,children:[a.jsx("div",{className:"flex-1 min-w-0",children:D}),a.jsx("div",{className:"w-9 h-9 shrink-0"})]}),(0,a.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 shadow-md px-4 py-3",children:[(0,a.jsxs)("div",{className:"max-w-[1400px] mx-auto flex items-start gap-3",children:[a.jsx("div",{className:"flex-1 min-w-0",children:D}),a.jsx("div",{className:"shrink-0 pt-0.5",children:a.jsx(ol.T,{})})]}),c&&a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50","aria-modal":!0,role:"alertdialog","aria-labelledby":"work-warning-title",children:(0,a.jsxs)("div",{className:"mx-4 max-w-sm rounded-xl bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-600 shadow-xl p-4 space-y-3",children:[a.jsx("p",{id:"work-warning-title",className:"font-semibold text-amber-800 dark:text-amber-200",children:" Work time rule"}),a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-line",children:c.message}),c.subtext&&a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:c.subtext}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{type:"button",onClick:()=>{c.onCancel?.(),m(null)},className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>c.onConfirm(),className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-amber-500 hover:bg-amber-600 text-white",children:c.confirmLabel})]})]})})]})]})}function om(e,t,r,i){for(let s=0;s<i;){if(!r[s]){s++;continue}let n=s;for(;n<i&&r[n];)n++;let a=(n-s)*30<=30,o=s>0&&e[s-1],l=n<i&&e[n];if(a&&(o||l))for(let e=s;e<n;e++)t[e]=!0,r[e]=!1;s=n}return{work_time:e,breaks:t,non_work:r}}function op(e,t,r){return r?.trim()&&t?e.map((e,i)=>(0,aW.uQ)(t,i)>=r||(e.work_time||[]).some(Boolean)?e:{...e,non_work:Array(48).fill(!1)}):e}function of(e,t){let r=(0,aW._P)(),i=e.map(e=>({...e}));for(let s=0;s<e.length;s++){let e=s>0&&i[s-1].events||[],n=e[e.length-1],a=n&&("work"===n.type||"break"===n.type)?n.type:null,o=i[s].events||[],l=(0,aW.uQ)(t,s),u=new Date(l+"T00:00:00").getTime(),d=l===r,h=new Date(l+"T23:59:59").getTime(),c=Date.now(),m=d?Math.min(h,c):h,p=d?Math.min(48,Math.ceil((m-u)/18e5)):48,f=0;if(a){let e=o[0];f=e?Math.min(p,Math.max(0,Math.ceil((new Date(e.time).getTime()-u)/18e5))):p}let g=function(e,t,r){let i=Array(48).fill(!1),s=Array(48).fill(!1),n=Array(48).fill(!1),a=(0,aW._P)();if(t>a)return{work_time:i,breaks:s,non_work:n};let o=t===a,l=Date.now(),u=new Date(t+"T00:00:00").getTime(),d=new Date(t+"T23:59:59").getTime(),h=o?Math.min(d,l):d,c=o?Math.min(48,Math.ceil((h-u)/18e5)):48,{carryOverType:m,carryOverEndSlot:p=0}=r??{};if(m&&p>0){let e=Math.min(p,c);for(let t=0;t<e;t++)"work"===m?i[t]=!0:s[t]=!0}if(!e?.length){for(let e=0;e<c;e++)i[e]||s[e]||(n[e]=!0);return om(i,s,n,c)}for(let t=0;t<e.length;t++){let r=e[t],n=e[t+1];if("stop"===r.type)continue;let a=new Date(r.time).getTime(),m=n?new Date(n.time).getTime():o?l:d,p=Math.max(a,u),f=Math.min(m,h),g=Math.floor((f-p)/6e4),x=Math.floor((p-u)/18e5),y=Math.ceil((f-u)/18e5),v="break"===r.type&&null!=n&&g<10;for(let e=Math.max(0,x);e<Math.min(c,y);e++)"work"===r.type||v?i[e]=!0:"break"===r.type&&(s[e]=!0)}for(let e=0;e<c;e++)i[e]||s[e]||(n[e]=!0);return om(i,s,n,c)}(o.length?o:void 0,l,{carryOverType:a??void 0,carryOverEndSlot:f||void 0});i[s]={...i[s],...g}}return i}function og(e){return .5*(e||[]).filter(Boolean).length}function ox(e){return og(e.work_time)>0||(e.events?.some(e=>"work"===e.type)??!1)}function oy(e){let t=e||[],r=0,i=0;for(let e=0;e<t.length;e++)t[e]?r=Math.max(r,++i):i=0;return .5*r}function ov(e,t){let r=e||[],i=0,s=0,n=2*t;for(let e=0;e<r.length;e++)r[e]?s++:(s>=n&&i++,s=0);return s>=n&&i++,i}function ob(e,t){let r=e.work_time||Array(48).fill(!1),i=t.work_time||Array(48).fill(!1),s=0;for(let e=47;e>=0&&!r[e];e--)s++;for(let e=0;e<48&&!i[e];e++)s++;return s}function ow(e,t,r,i){return e<i?(0,aW.uQ)(r,5+e):(0,aW.uQ)(t,e-i)}oo.Z,aX.Z,aQ.Z,eR.Z;let ok=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function oj(e,t){return e.flatMap(e=>(e[t]||Array(48).fill(!1)).slice(0,48))}let oT=["non-work","7 continuous","7h ","17h","72","48 hrs","48hrs","168","14-day","rest"],oN={timeout:2500,maxAge:8e3,highAccuracy:!1};function oS(e){if(!("undefined"!=typeof navigator&&"geolocation"in navigator))return Promise.resolve(null);let{timeout:t=5e3,maxAge:r=1e4,highAccuracy:i=!0}=e??{};return new Promise(e=>{navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lng:t.coords.longitude,accuracy:t.coords.accuracy??0})},()=>e(null),{enableHighAccuracy:i,timeout:t,maximumAge:r})})}function oM(e,t,r,i){let s=function(e,t,r){let i=null;for(let s=0;s<t&&s<e.length;s++){let t=e[s];if((t.truck_rego??"").trim().toLowerCase()!==(r??"").trim().toLowerCase())continue;let n=t.end_kms;null!=n&&"number"==typeof n&&!Number.isNaN(n)&&(null===i||n>i)&&(i=n)}return i}(e,t,r);return null===s&&null===i?null:null===s?i:null===i?s:Math.max(s,i)}function oP(e,t,r,i,s,n){if(""===r.trim())return{valid:!0};let a=oM(e,t,r,n);if(null!=i&&null!=a&&i<a)return{valid:!1,message:`Start km (${i}) cannot be lower than the last recorded end km for this rego (${a}).`};if(null!=s){if(null!=a&&s<a)return{valid:!1,message:`End km (${s}) cannot be lower than the last recorded end km for this rego (${a}).`};if(null!=i&&s<i)return{valid:!1,message:`End km (${s}) cannot be less than start km (${i}).`}}return{valid:!0}}function oD(e){for(let t=0;t<e.length;t++){let r=e[t],i=(r.truck_rego??"").trim();if(""===i)continue;let s=r.start_kms,n=r.end_kms;if(null==s||"number"==typeof s&&Number.isNaN(s))return`Day ${t+1}: start km is required when rego is set.`;if(null==n||"number"==typeof n&&Number.isNaN(n))return`Day ${t+1}: end km is required when rego is set. Use End Shift to record end km.`;let a=oP(e,t,i,s,n,null);if(!a.valid)return a.message??`Day ${t+1}: invalid km.`}return null}let oA=()=>({day_label:"",date:"",truck_rego:"",destination:"",start_kms:void 0,end_kms:void 0,work_time:Array(48).fill(!1),breaks:Array(48).fill(!1),non_work:Array(48).fill(!1)});function oC({sheetId:e}){let t=(0,u.NL)(),[r,i]=(0,o.useState)({driver_name:"",second_driver:"",driver_type:"solo",destination:"",last_24h_break:"",week_starting:function(){let e=new Date,t=e.getDay(),r=new Date(e);return r.setDate(e.getDate()-t),r.toISOString().split("T")[0]}(),days:Array(7).fill(null).map(()=>oA()),status:"draft"}),[s,n]=(0,o.useState)(!1),[l,g]=(0,o.useState)(null),[x,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)(!1),[k,j]=(0,o.useState)(null),[T,N]=(0,o.useState)(""),[S,M]=(0,o.useState)(null),P=(0,o.useRef)(r);P.current=r,(0,o.useRef)(null);let D=(0,o.useRef)(null),A=(0,o.useRef)(null),[C,E]=(0,o.useState)(()=>Date.now()),_=(0,o.useMemo)(()=>(function(e){if(!e)return new Date().getDay();let[t,r,i]=e.split("-").map(Number),s=new Date(t,r-1,i),n=new Date;return Math.max(0,Math.min(6,Math.round((new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()-s.getTime())/864e5)))})(r.week_starting),[r.week_starting,C]),{data:R,isLoading:V}=(0,d.a)({queryKey:["sheet",e],queryFn:()=>(0,p.r9)(e)}),{data:L=[]}=(0,d.a)({queryKey:["sheets"],queryFn:()=>(0,p.Fy)()}),{data:F=[]}=(0,d.a)({queryKey:["regos"],queryFn:()=>(0,p.OX)()}),B=(0,o.useMemo)(()=>{if(!r.driver_name||!r.week_starting)return null;let t=new Date(new Date(r.week_starting));t.setDate(t.getDate()-7);let i=t.toISOString().split("T")[0];return L.find(t=>t.id!==e&&t.driver_name?.toLowerCase()===r.driver_name?.toLowerCase()&&t.week_starting===i)||null},[L,r.driver_name,r.week_starting,e]),O=(0,o.useMemo)(()=>({days:r.days,driverType:r.driver_type,prevWeekDays:B?.days??null,last24hBreak:r.last_24h_break||void 0,weekStarting:r.week_starting||void 0,prevWeekStarting:B?.week_starting??void 0}),[r.days,r.driver_type,r.last_24h_break,r.week_starting,B]),{data:I,isLoading:$}=(0,d.a)({queryKey:["compliance",e,O],queryFn:()=>m.h.compliance.check(O),enabled:!!r.days?.length}),U=(I?.results??[]).some(e=>"violation"===e.type),z=(0,o.useMemo)(()=>r.days?.length&&"completed"!==r.status?function(e,t,r,i){let s=function(e,t){let r=new Date((0,aW.uQ)(e,t)+"T00:00:00").getTime();return Math.max(0,Math.min(47,Math.floor((Date.now()-r)/18e5)))}(r,t);return(function(e,t){let r=[],{driverType:i="solo",prevWeekDays:s,last24hBreak:n,weekStarting:a,prevWeekStarting:o}=t;!function(e,t){e.forEach((e,r)=>{let i=ok[r],s=og(e.work_time),n=og(e.breaks);if(0===s+n+og(e.non_work))return;let a=e.events||[];if(a.length>1){let e=0,r=null,s=[];for(let n=0;n<a.length;n++){let o=a[n],l=a[n+1];if(!l)continue;let u=Math.floor((new Date(l.time).getTime()-new Date(o.time).getTime())/6e4);if("work"===o.type){if(s.length>0){let n=s.reduce((e,t)=>e+t,0),a=s.filter(e=>e>=10).length;n>=20&&a>=1?e=0:t.push({type:"violation",iconKey:"Coffee",day:i,message:"20 min break for 5h work not met"}),s.length=0,r=null}(e+=u)>300&&(t.push({type:"violation",iconKey:"AlertTriangle",day:i,message:"More than 5h work without valid break"}),e=0)}else"break"===o.type?(r||(r=o.time),s.push(u)):(s.length=0,r=null,e=0)}}else s>=5&&0===n&&t.push({type:"warning",iconKey:"Coffee",day:i,message:"20 min break for ea 5 hours work time - 10 min minimum x 2"})})}(e,r);let l=(s||[]).map(e=>({...e,work_time:e.work_time||Array(48).fill(!1),breaks:e.breaks||Array(48).fill(!1),non_work:e.non_work||Array(48).fill(!1)})),u=[...l.slice(-3),...e],d=Math.min(3,l.length);"two_up"===i?function(e,t,r){let i=oj(e,"non_work"),s=oj(e,"work_time"),n=oj(e,"breaks"),a=e=>{let t=Math.floor(e/48),i=t-r;return i<0?`prev+${t+1}`:ok[i]??`D${t+1}`};if(i.length>=48)for(let e=0;e<=i.length-48;e++){let r=e+48,o=i.slice(e,r).filter(Boolean).length,l=s.slice(e,r).filter(Boolean).length+n.slice(e,r).filter(Boolean).length,u=.5*o;if(.5*l>=16&&u<7){t.push({type:"violation",iconKey:"Moon",day:a(r-1),message:"Need 7h non-work in rolling 24h"});break}}if(i.length>=96)for(let e=0;e<=i.length-96;e++){let r=i.slice(e,e+96);if(1>ov(r,7)&&r.some((t,r)=>s[e+r]||n[e+r])){t.push({type:"warning",iconKey:"Moon",day:a(e+96-1),message:"Need 1 block of 7 continuous hrs non-work in any rolling 48 hrs (Two-Up rule)"});break}}let o=e.slice(r),l=o.reduce((e,t)=>e+og(t.non_work),0),u=oy(o.flatMap(e=>e.non_work||Array(48).fill(!1)));l>0&&l<48&&t.push({type:"warning",iconKey:"TrendingUp",day:"7-day",message:`Need 48 hrs non-work in 7 days (current: ${l}h)  Two-Up rule`}),l>=48&&u<24&&t.push({type:"warning",iconKey:"Moon",day:"7-day",message:`48hrs non-work must include 24 continuous hrs (longest: ${u}h)  Two-Up rule`})}(u,r,d):function(e,t,r,i){if(!e.some(ox))return;e.forEach((e,s)=>{if(s<r||!ox(e))return;let n=s-r,a=ok[n]||`Day${n+1}`,o=og(e.work_time)+og(e.breaks)+og(e.non_work);if(0===o)return;let l=oy(e.non_work),u=ow(s,i?.weekStarting??"",i?.prevWeekStarting??"",r);(!i?.last24hBreak||!(u<i.last24hBreak)||ox(e))&&!(i?.last24hBreak&&u===i.last24hBreak)&&o>=12&&l>0&&l<7&&t.push({type:"violation",iconKey:"Moon",day:a,message:"Need 7 continuous hrs non-work"})});let s=function(e,t){if(0===e.length)return[];if(1===e.length)return[[0]];let{weekStarting:r="",prevWeekStarting:i="",prevCount:s=0,last24hBreak:n}=t??{},a=[],o=0;for(let t=0;t<e.length-1;t++){let l=ob(e[t],e[t+1]),u=n&&r&&(ow(t,r,i,s)===n||ow(t+1,r,i,s)===n);(l>=48||u)&&(a.push(Array.from({length:t-o+1},(e,t)=>o+t)),o=t+1)}return a.push(Array.from({length:e.length-o},(e,t)=>o+t)),a}(e,{weekStarting:i?.weekStarting,prevWeekStarting:i?.prevWeekStarting,prevCount:r,last24hBreak:i?.last24hBreak}),n=e=>{let t=e-r;return t<0?`prev+${e+1}`:ok[t]??`D${e+1}`};for(let a of s){let s=a.map(t=>e[t]),o=oj(s,"non_work"),l=oj(s,"work_time"),u=oj(s,"breaks"),d=0,h=0;for(let e=0;e<o.length;e++){let c=Math.min(Math.floor(e/48),s.length-1);if(!ox(s[c]??{})){d=0,h=0;continue}let m=l[e]||u[e];if(o[e])h++,d=0;else if(m){if(h>=14&&(d=0),h=0,++d>34){let e=a[c],s=ow(e,i?.weekStarting??"",i?.prevWeekStarting??"",r);if(i?.last24hBreak&&s===i.last24hBreak){d=0;continue}t.push({type:"violation",iconKey:"Clock",day:n(e),message:"More than 17h between 7-hr rest breaks"});break}}else h=0}}let a=i?.weekStarting??"",o=i?.prevWeekStarting??"";for(let i of s){let s=i.map(t=>e[t]),l=oj(s,"non_work"),u=oj(s,"work_time"),d=oj(s,"breaks"),h=e=>n(i[Math.min(Math.floor(e/48),i.length-1)]);if(l.length>=144){let e=l.length-144,s=e+144-1,n=i[Math.min(Math.floor(s/48),i.length-1)],c=(s%48+1)*30,m=Math.floor(c/60),p=c%60,f=24===m?"24:00":`${String(m).padStart(2,"0")}:${String(p).padStart(2,"0")}`,g=ow(n,a,o,r),x=g?new Date(g+"T12:00:00").toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"}):"",y=x?`  72h window ending ${x} at ${f}`:"",v=l.slice(e,e+144),b=.5*v.filter(Boolean).length,w=ov(v,7);v.some((t,r)=>u[e+r]||d[e+r])&&(b<27?t.push({type:"warning",iconKey:"TrendingUp",day:h(s),message:`Need 27 hrs non-work in any rolling 72hr period (24h non-work resets this rule; this window: ${b}h)${y}`}):w<3&&t.push({type:"warning",iconKey:"Moon",day:h(s),message:`Need 3 blocks of 7 continuous hrs non-work in any rolling 72hrs (24h non-work resets; found: ${w})${y}`}))}}}(u,r,d,{weekStarting:a,prevWeekStarting:o,last24hBreak:n});let h=e.reduce((e,t)=>e+og(t.work_time),0);if(l.reduce((e,t)=>e+og(t.work_time),0),l.length>0){let t=[...l,...e];for(let e of function(e){if(0===e.length)return[];if(1===e.length)return[[0]];let t=[],r=0;for(let i=0;i<e.length-1;i++)ob(e[i],e[i+1])>=96&&(t.push(Array.from({length:i-r+1},(e,t)=>r+t)),r=i+1);return t.push(Array.from({length:e.length-r},(e,t)=>r+t)),t}(t)){let i=e.reduce((e,r)=>e+og(t[r].work_time),0);i>168?r.push({type:"violation",iconKey:"TrendingUp",day:"14-day",message:"14-day work exceeds 168h"}):i>140&&r.push({type:"warning",iconKey:"TrendingUp",day:"14-day",message:`${i}h work in this period  approaching 168h limit (14-day rule resets after 48h continuous non-work)`})}}else h>168?r.push({type:"violation",iconKey:"TrendingUp",day:"14-day",message:"14-day work exceeds 168h"}):h>84&&r.push({type:"warning",iconKey:"TrendingUp",day:"14-day",message:`${h}h this week  no previous sheet found to check full 14-day total`});return r})(e.map((e,r)=>{if(r!==t)return{...e};let i=[...e.work_time??Array(48).fill(!1)];return s>=0&&s<i.length&&(i[s]=!0),{...e,work_time:i}}),{...i,weekStarting:r}).filter(e=>oT.some(t=>e.message.includes(t))).map(e=>e.message)}(r.days,_,r.week_starting,{driverType:r.driver_type,prevWeekDays:B?.days??null,last24hBreak:r.last_24h_break||void 0,prevWeekStarting:B?.week_starting??void 0}):[],[r.days,r.week_starting,r.driver_type,r.last_24h_break,r.status,_,B?.days,B?.week_starting]),q=(0,o.useCallback)(()=>{document.getElementById("compliance-check")?.scrollIntoView({behavior:"smooth",block:"start"})},[]),Z=(0,h.D)({mutationFn:async t=>(0,p.o_)(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:["sheet",e]}),t.invalidateQueries({queryKey:["sheets"]}),n(!1),g(new Date)}}),K=(0,o.useCallback)(e=>{i(t=>{let r={...t,...e};return{...r,days:op(r.days,r.week_starting,r.last_24h_break||void 0)}}),n(!0)},[]),H=(0,o.useCallback)((e,t)=>{i(r=>{let i=[...r.days];i[e]=t;let s=of(i,r.week_starting);return{...r,days:op(s,r.week_starting,r.last_24h_break||void 0)}}),n(!0)},[]),Y=(0,o.useCallback)((e,t)=>{i(r=>{let i=[...r.days],s=i[e],n=[...s.events||[],{time:new Date().toISOString(),type:t}];i[e]={...s,events:n};let a=of(i,r.week_starting);return{...r,days:op(a,r.week_starting,r.last_24h_break||void 0)}}),n(!0),oS(oN).then(t=>{t&&(i(r=>{let i=[...r.days],s=i[e],n=[...s.events||[]],a=n[n.length-1];return a&&(n[n.length-1]={...a,lat:t.lat,lng:t.lng,accuracy:t.accuracy}),i[e]={...s,events:n},{...r,days:i}}),n(!0))})},[]),X=(0,o.useCallback)(async e=>{let t=P.current.days,r=t[e],i=r?.start_kms;if(null==i||"number"==typeof i&&Number.isNaN(i)){window.alert("Please enter start km for today before ending the shift.");return}let s=(r?.truck_rego??"").trim(),n=null;if(s)try{n=(await m.h.sheets.regoMaxEndKms(s)).maxEndKms}catch{}let a=oM(t,e,s,n);if(null!=a&&i<a){window.alert(`Start km (${i}) cannot be lower than the last recorded end km for this rego (${a}). Please correct start km on the day card first.`);return}M(null),N(String(P.current.days[e]?.end_kms??"")),j({dayIndex:e})},[]),G=(0,o.useCallback)(async()=>{if(null==k)return;M(null);let e=k.dayIndex,t=T.trim();if(""===t){M("End km is required.");return}let r=Number(t);if(Number.isNaN(r)||r<0){M("Enter a valid end km (0 or greater).");return}let s=P.current.days,a=s[e],o=a?.start_kms??null,l=(a?.truck_rego??"").trim(),u=null;if(l)try{u=(await m.h.sheets.regoMaxEndKms(l)).maxEndKms}catch{}let d=oP(s,e,l,o,r,u);if(!d.valid){M(d.message??"Invalid km.");return}i(t=>{let i=[...t.days],s=i[e],n=[...s.events||[],{time:new Date().toISOString(),type:"stop"}];i[e]={...s,end_kms:r,events:n};let a=of(i,t.week_starting);return{...t,days:op(a,t.week_starting,t.last_24h_break||void 0)}}),n(!0),j(null),N(""),oS(oN).then(t=>{t&&(i(r=>{let i=[...r.days],s=i[e],n=[...s.events||[]],a=n[n.length-1];return a&&(n[n.length-1]={...a,lat:t.lat,lng:t.lng,accuracy:t.accuracy}),i[e]={...s,events:n},{...r,days:i}}),n(!0))})},[k,T]),Q=()=>{w(!1);let e=oD(r.days);if(e){window.alert(e);return}Z.mutate({driver_name:r.driver_name,second_driver:r.second_driver,driver_type:r.driver_type,destination:r.destination,last_24h_break:r.last_24h_break||void 0,week_starting:r.week_starting,days:r.days,status:r.status,signature:r.signature||void 0,signed_at:r.signed_at||void 0})},J=(0,o.useCallback)(()=>{w(!1),window.open(m.h.sheets.exportPdfUrl(e),"_blank")},[e]);return V||!R?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-950",children:a.jsx(eN.Z,{className:"w-6 h-6 animate-spin text-slate-400"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pb-6",children:["completed"!==r.status&&a.jsx(oc,{days:r.days,currentDayIndex:_,weekStarting:r.week_starting,onLogEvent:Y,onEndShiftRequest:X,leadingIcon:a.jsx(eS.Z,{className:"w-5 h-5"}),workRelevantComplianceMessages:z}),(0,a.jsxs)("div",{className:"max-w-[1400px] mx-auto px-4 py-6",children:[a.jsx(a_.m,{backHref:"/sheets",backLabel:"Your Sheets",title:"Fatigue Record",subtitle:"WA Commercial Driver Fatigue Management",actions:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.default,{href:"/manager",className:"inline-flex items-center justify-center gap-1.5 shrink-0 h-8 rounded-md border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-2.5 sm:px-3 text-xs font-medium text-slate-700 dark:text-slate-200 shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[a.jsx(eM.Z,{className:"w-3.5 h-3.5"}),"Manager"]}),(0,a.jsxs)(c.default,{href:`/sheets/${e}/shift-log`,className:"inline-flex items-center justify-center gap-1.5 shrink-0 h-8 rounded-md border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-2.5 sm:px-3 text-xs font-medium text-slate-700 dark:text-slate-200 shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[a.jsx(eP,{className:"w-3.5 h-3.5"}),"Shift Log"]}),l&&!s&&(0,a.jsxs)("span",{className:"text-[10px] text-slate-400 flex items-center gap-1 shrink-0",children:[a.jsx(eD.Z,{className:"w-3 h-3 text-emerald-400"}),(0,a.jsxs)("span",{className:"hidden sm:inline",children:["Saved ",l.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]}),s&&!Z.isPending&&a.jsx("span",{className:"text-[10px] text-amber-500 font-medium shrink-0",children:"Unsaved changes"}),"completed"===r.status&&(0,a.jsxs)(v,{variant:"outline",className:"border-emerald-300 text-emerald-600 flex items-center gap-1 shrink-0",children:[a.jsx(eD.Z,{className:"w-3 h-3"})," Completed"]}),a.jsx("div",{className:"relative inline-flex shrink-0",ref:D,children:"completed"!==r.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.z,{onClick:Q,disabled:Z.isPending,size:"sm",className:"bg-slate-900 hover:bg-slate-800 text-white gap-1.5 text-xs rounded-r-none border-r border-slate-700",children:[Z.isPending?a.jsx(eN.Z,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(eA.Z,{className:"w-3.5 h-3.5"}),"Save"]}),a.jsx(f.z,{type:"button",size:"sm",onClick:()=>w(e=>!e),className:"bg-slate-900 hover:bg-slate-800 text-white h-8 w-8 p-0 rounded-l-none border-slate-700","aria-label":"Save options",children:a.jsx(eC.Z,{className:`w-3.5 h-3.5 transition-transform ${b?"rotate-180":""}`})}),b&&(0,a.jsxs)("div",{className:"absolute right-0 top-full z-50 mt-1 min-w-[180px] rounded-md border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 py-1 shadow-lg",children:[(0,a.jsxs)("button",{type:"button",onClick:Q,disabled:Z.isPending,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-xs text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700",children:[a.jsx(eA.Z,{className:"w-3.5 h-3.5"})," Save draft"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>{w(!1);let e=oD(r.days);if(e){window.alert(e);return}y(!0)},className:"flex w-full items-center gap-2 px-3 py-2 text-left text-xs text-emerald-700 dark:text-emerald-300 hover:bg-emerald-50 dark:hover:bg-emerald-900/50",children:[a.jsx(eD.Z,{className:"w-3.5 h-3.5"})," Save & mark complete"]}),(0,a.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),J()},className:"flex w-full items-center gap-2 px-3 py-2 text-left text-xs text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 border-t border-slate-200 dark:border-slate-600",children:[a.jsx(eE,{className:"w-3.5 h-3.5"}),"Export PDF"]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.z,{onClick:Q,disabled:Z.isPending,size:"sm",className:"bg-slate-900 hover:bg-slate-800 text-white gap-1.5 text-xs",children:[Z.isPending?a.jsx(eN.Z,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(eA.Z,{className:"w-3.5 h-3.5"}),"Save"]}),(0,a.jsxs)(f.z,{type:"button",onClick:J,size:"sm",variant:"outline",className:"gap-1.5 text-xs border-slate-300 dark:border-slate-600",children:[a.jsx(eE,{className:"w-3.5 h-3.5"}),"Export PDF"]})]})}),a.jsx("div",{className:"w-full basis-full h-0","aria-hidden":!0}),(0,a.jsxs)("button",{type:"button",onClick:q,className:`inline-flex items-center gap-1.5 shrink-0 h-8 sm:h-9 rounded-md border px-2.5 sm:px-3 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-1 ${U?"border-amber-300 dark:border-amber-700 bg-amber-50 dark:bg-amber-900/40 text-amber-800 dark:text-amber-200 hover:bg-amber-100 dark:hover:bg-amber-800/50":"border-emerald-300 dark:border-emerald-700 bg-emerald-50 dark:bg-emerald-900/40 text-emerald-800 dark:text-emerald-200 hover:bg-emerald-100 dark:hover:bg-emerald-800/50"}`,title:U?"View compliance  issues found":"View compliance  OK","aria-label":U?"Compliance: issues found  jump to details":"Compliance: OK  jump to details",children:[U?a.jsx(e_,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 shrink-0"}):a.jsx(eD.Z,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 shrink-0"}),a.jsx("span",{children:"Compliance"}),a.jsx("span",{className:"font-medium",children:U?"Issues":"OK"})]})]})}),Z.isError&&Z.error.body?.code==="PREVIOUS_WEEK_INCOMPLETE"&&(0,a.jsxs)("div",{className:"mb-4 rounded-xl border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/30 p-4 flex flex-wrap items-center justify-between gap-2",children:[a.jsx("p",{className:"text-sm text-amber-800",children:Z.error instanceof Error?Z.error.message:"Save failed."}),Z.error.body?.sheet_id&&a.jsx(c.default,{href:`/sheets/${Z.error.body.sheet_id}`,children:a.jsx(f.z,{variant:"outline",size:"sm",className:"border-amber-300 dark:border-amber-700 text-amber-800 dark:text-amber-200 hover:bg-amber-100 dark:hover:bg-amber-900/50",children:"Open that sheet"})})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,a.jsxs)("div",{ref:A,className:"flex-1 space-y-4",children:[a.jsx(aE.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm p-4 md:p-5",children:a.jsx(aI,{sheetData:r,onChange:K})}),r.days.map((e,t)=>a.jsx("div",{className:"completed"!==r.status?"scroll-mt-48":"scroll-mt-6",children:a.jsx(aY,{dayIndex:t,dayData:e,onUpdate:H,weekStart:r.week_starting,regos:F})},t))]}),a.jsx("div",{id:"compliance-check",className:"w-full lg:w-80 shrink-0 scroll-mt-24",children:(0,a.jsxs)("div",{className:"lg:sticky lg:top-6 space-y-4",children:[(0,a.jsxs)(aE.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm p-4",children:[a.jsx("h2",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 mb-3 uppercase tracking-wider",children:"Compliance Check"}),a.jsx(oi,{days:r.days,driverType:r.driver_type,prevWeekDays:B?.days||null,last24hBreak:r.last_24h_break||void 0,weekStarting:r.week_starting||void 0,prevWeekStarting:B?.week_starting??void 0,complianceResults:I?.results??null,complianceLoading:$})]}),r.signature&&(0,a.jsxs)(aE.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-900 rounded-xl border border-emerald-200 dark:border-emerald-800 shadow-sm p-4",children:[(0,a.jsxs)("h2",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 mb-2 uppercase tracking-wider flex items-center gap-1.5",children:[a.jsx(eD.Z,{className:"w-4 h-4 text-emerald-500"})," Driver Signature"]}),a.jsx("div",{className:"border border-slate-200 dark:border-slate-600 rounded-lg overflow-hidden bg-slate-50 dark:bg-slate-800",children:a.jsx("img",{src:r.signature,alt:"Driver signature",className:"w-full h-auto"})}),r.signed_at&&(0,a.jsxs)("p",{className:"text-[10px] text-slate-400 mt-1.5",children:["Signed"," ",new Date(r.signed_at).toLocaleString("en-AU",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]})})]})]}),a.jsx(oa,{open:x,onConfirm:e=>{let t=new Date().toISOString();i(r=>({...r,status:"completed",signature:e,signed_at:t})),y(!1),Z.mutate({driver_name:r.driver_name,second_driver:r.second_driver,driver_type:r.driver_type,destination:r.destination,last_24h_break:r.last_24h_break||void 0,week_starting:r.week_starting,days:r.days,status:"completed",signature:e,signed_at:t})},onCancel:()=>y(!1),driverName:r.driver_name}),a.jsx(W,{open:!!k,onOpenChange:e=>!e&&j(null),children:(0,a.jsxs)(ev,{className:"sm:max-w-sm",children:[(0,a.jsxs)(eb,{children:[(0,a.jsxs)(ew,{className:"flex items-center gap-2",children:[a.jsx(eR.Z,{className:"w-5 h-5"}),"End shift"]}),a.jsx(ek,{children:"Enter end odometer. This will log End Shift for today and switch to non-work time. Start km and end km are required; end km must not be lower than any previous entry for this rego."})]}),(0,a.jsxs)("div",{className:"space-y-3 pt-1",children:[a.jsx(eT._,{htmlFor:"end-shift-kms",className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:"End km (required)"}),a.jsx(ej.I,{id:"end-shift-kms",type:"number",min:0,placeholder:"e.g. 12345",value:T,onChange:e=>{N(e.target.value),M(null)},className:"font-mono","aria-invalid":!!S,"aria-describedby":S?"end-shift-error":void 0}),S&&a.jsx("p",{id:"end-shift-error",className:"text-xs text-red-600 dark:text-red-400",role:"alert",children:S}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end pt-2",children:[a.jsx(f.z,{variant:"outline",size:"sm",onClick:()=>j(null),children:"Cancel"}),(0,a.jsxs)(f.z,{size:"sm",onClick:G,className:"gap-1.5",children:[a.jsx(eR.Z,{className:"w-3.5 h-3.5"}),"End shift"]})]})]})]})})]})}},82066:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});var i=r(10326);r(17577);var s=r(90434),n=r(9921);function a({backHref:e,backLabel:t="Your Sheets",title:r,subtitle:a,icon:o,actions:l}){return(0,i.jsxs)("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between sm:flex-wrap mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-shrink-0",children:[null!=e?i.jsx(s.default,{href:e,className:"flex shrink-0 rounded-full text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 dark:focus:ring-offset-slate-900","aria-label":t,title:t,children:i.jsx("span",{className:"flex items-center justify-center min-w-10 min-h-10 w-10 h-10 sm:min-w-12 sm:min-h-12 sm:w-12 sm:h-12",children:i.jsx(n.Z,{className:"w-5 h-5 sm:w-6 sm:h-6",strokeWidth:2.25})})}):i.jsx("span",{className:"w-10 h-10 sm:w-12 sm:h-12 shrink-0","aria-hidden":!0}),(0,i.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[null!=o&&i.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-xl bg-slate-900 dark:bg-slate-600 flex items-center justify-center text-white dark:text-slate-200 shrink-0",children:o}),(0,i.jsxs)("div",{className:"min-w-0 flex-1",children:[i.jsx("h1",{className:"text-base sm:text-lg md:text-xl font-bold text-slate-800 dark:text-slate-100 truncate",children:r}),null!=a&&i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 truncate mt-0.5",children:a})]})]})]}),null!=l&&i.jsx("div",{className:"flex flex-wrap items-center gap-2 justify-start min-w-0 w-full sm:w-auto",children:l})]})}},41190:(e,t,r)=>{"use strict";r.d(t,{I:()=>a});var i=r(10326),s=r(17577),n=r(51223);let a=s.forwardRef(({className:e,type:t,...r},s)=>i.jsx("input",{type:t,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));a.displayName="Input"},44794:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var i=r(10326),s=r(17577),n=r(51223);let a=s.forwardRef(({className:e,...t},r)=>i.jsx("label",{ref:r,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));a.displayName="Label"},29280:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>h,Ph:()=>u,Ql:()=>c,i4:()=>d,ki:()=>m});var i=r(10326),s=r(17577),n=r(36363),a=r(14711),o=r(70744),l=r(51223);let u=n.fC,d=s.forwardRef(({className:e,children:t,...r},s)=>(0,i.jsxs)(n.xz,{ref:s,className:(0,l.cn)("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-ring disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,i.jsx(n.JO,{asChild:!0,children:i.jsx(a.Z,{className:"h-4 w-4 opacity-50"})})]}));d.displayName=n.xz.displayName;let h=s.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>i.jsx(n.h_,{children:i.jsx(n.VY,{ref:a,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow-md",e),position:r,...s,children:i.jsx(n.l_,{className:"p-1",children:t})})}));h.displayName=n.VY.displayName;let c=s.forwardRef(({className:e,children:t,...r},s)=>(0,i.jsxs)(n.ck,{ref:s,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-100 dark:focus:bg-slate-700 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(n.wU,{children:i.jsx(o.Z,{className:"h-4 w-4"})})}),i.jsx(n.eT,{children:t})]}));c.displayName=n.ck.displayName;let m=n.B4},46015:(e,t,r)=>{"use strict";r.d(t,{N:()=>i,t:()=>s});let i={work:{hex:"#3b82f6",rgb:[59,130,246],button:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300",badge:"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-200",statsCard:"bg-blue-50 dark:bg-blue-900/30 dark:border-blue-800/50",statsLabel:"text-blue-500 dark:text-blue-400",statsValue:"text-blue-700 dark:text-blue-200"},break:{hex:"#f59e0b",rgb:[251,191,36],button:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-300",badge:"bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-200",statsCard:"bg-amber-50 dark:bg-amber-900/30 dark:border-amber-800/50",statsLabel:"text-amber-500 dark:text-amber-400",statsValue:"text-amber-700 dark:text-amber-200"},rest:{hex:"#10b981",rgb:[52,211,153],button:"bg-emerald-500 hover:bg-emerald-600 disabled:bg-emerald-300",badge:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-200",statsCard:"bg-emerald-50 dark:bg-emerald-900/30 dark:border-emerald-800/50",statsLabel:"text-emerald-500 dark:text-emerald-400",statsValue:"text-emerald-700 dark:text-emerald-200"},stop:{hex:"#ef4444",rgb:[239,68,68],button:"bg-red-500 hover:bg-red-600 disabled:bg-red-300",badge:"bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-200",statsCard:"bg-red-50 dark:bg-red-900/30 dark:border-red-800/50",statsLabel:"text-red-500 dark:text-red-400",statsValue:"text-red-700 dark:text-red-200"}},s=[{key:"work_time",label:"Work",color:i.work.hex},{key:"breaks",label:"Breaks",color:i.break.hex},{key:"non_work",label:"Non-Work Time",color:i.rest.hex}]},29668:(e,t,r)=>{"use strict";function i(e){let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${i}`}function s(){return i(new Date)}function n(e,t){let[r,s,n]=e.split("-").map(Number),a=new Date(r,s-1,n);return a.setDate(a.getDate()+t),i(a)}r.d(t,{_P:()=>s,uQ:()=>n})},36087:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var i=r(19510),s=r(58585),n=r(75571),a=r(95456);let o=(0,r(68570).createProxy)(String.raw`C:\Users\r_she\Documents\Fatigue app\app-next\src\app\sheets\[id]\sheet-detail.tsx#SheetDetail`);async function l({params:e}){await (0,n.getServerSession)(a.Lz)||(0,s.redirect)("/login");let{id:t}=await e;return i.jsx(o,{sheetId:t})}},95456:(e,t,r)=>{"use strict";r.d(t,{Ad:()=>u,Lz:()=>o,SC:()=>d,gS:()=>l});var i=r(75571),s=r(13539),n=r(53797),a=r(20728);let o={adapter:(0,s.N)(a._),session:{strategy:"jwt",maxAge:2592e3},pages:{signIn:"/login"},providers:[(0,n.Z)({name:"Email and password",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){let t=e?.email,r=e?.password;if(!t||!r)return null;let i=void 0;if(i&&r===i){let e=await a._.user.findUnique({where:{email:t}});return e||(e=await a._.user.create({data:{email:t,name:t.split("@")[0]}})),{id:e.id,email:e.email,name:e.name}}return null}})],callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id,e.email=t.email),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id),e)}};async function l(){let e=await (0,i.getServerSession)(o),t=e?.user&&"id"in e.user?e.user.id:void 0;return t?{session:e,userId:t,isManager:!!await d()}:null}function u(e,t){return!!t.isManager||e.createdById===t.userId}async function d(){let e=await (0,i.getServerSession)(o),t=e?.user?e.user.id:void 0;if(!t)return null;let r=await a._.user.findUnique({where:{id:t},select:{id:!0,email:!0,name:!0,role:!0}});return r?"manager"!==r.role&&await a._.user.findFirst({where:{role:"manager"},select:{id:!0}})?null:{session:e,user:r}:null}},20728:(e,t,r)=>{"use strict";r.d(t,{_:()=>s});let i=require("@prisma/client"),s=globalThis.prisma??new i.PrismaClient({log:["error"]})},24635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(9664).Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},40666:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(9664).Z)("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]])},43022:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(9664).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},65249:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(9664).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},63144:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(9664).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[276,637,492,833,894,999,562],()=>r(51607));module.exports=i})();