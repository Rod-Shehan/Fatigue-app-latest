exports.id=562,exports.ids=[562],exports.modules={6209:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},28807:(e,t,r)=>{Promise.resolve().then(r.bind(r,81361)),Promise.resolve().then(r.bind(r,96123))},81361:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>u});var a=r(10326),n=r(77109),s=r(22852),i=r(44976),o=r(17577),d=r(31062),l=r(18775);function c(){let{online:e,pendingCount:t}=function(){let e=(0,i.NL)(),[t,r]=(0,o.useState)("undefined"==typeof navigator||navigator.onLine),[a,n]=(0,o.useState)(0);return{online:t,pendingCount:a,runSync:async()=>{if(!(0,l.Gg)())return;let t=await (0,l.Wn)();if(t.replacedTempId){let{tempId:e,realId:r}=t.replacedTempId}t.synced>0&&(e.invalidateQueries({queryKey:["sheets"]}),e.invalidateQueries({queryKey:["sheet"]})),n(await (0,l.eI)())}}}();return e&&0===t?null:a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 flex items-center justify-center gap-2 bg-amber-600 px-4 py-2 text-sm font-medium text-white shadow-lg",role:"status","aria-live":"polite",children:e?(0,a.jsxs)("span",{children:["Syncing ",t," change",1!==t?"s":"","…"]}):a.jsx("span",{children:"Offline — changes saved locally and will sync when you’re back online."})})}function u({children:e}){let[t]=(0,o.useState)(()=>new s.S);return a.jsx(d.f,{children:a.jsx(n.SessionProvider,{children:(0,a.jsxs)(i.aH,{client:t,children:[e,a.jsx(c,{})]})})})}},31062:(e,t,r)=>{"use strict";r.d(t,{F:()=>o,f:()=>i});var a=r(10326),n=r(17577);let s=(0,n.createContext)(null);function i({children:e}){let[t,r]=(0,n.useState)("system"),[i,o]=(0,n.useState)("light"),[d,l]=(0,n.useState)(!1);return a.jsx(s.Provider,{value:{theme:t,setTheme:e=>{r(e),localStorage.setItem("fatigue-theme",e);let t="system"!==e&&"dark"===e;o(t?"dark":"light"),function(e){let t=document.documentElement;e?t.classList.add("dark"):t.classList.remove("dark")}(t)},resolved:i},children:e})}function o(){let e=(0,n.useContext)(s);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},96123:(e,t,r)=>{"use strict";r.d(t,{ThemeToggleInLayout:()=>s});var a=r(10326),n=r(42718);function s(){return a.jsx("div",{className:"fixed top-4 right-4 z-50",children:a.jsx(n.T,{})})}},42718:(e,t,r)=>{"use strict";r.d(t,{T:()=>d});var a=r(10326);r(17577);var n=r(88567),s=r(55947),i=r(31062),o=r(91664);function d(){let{resolved:e,setTheme:t}=(0,i.F)();return a.jsx(o.z,{variant:"ghost",size:"icon",className:"h-11 w-11 rounded-lg text-slate-600 hover:bg-slate-100 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-100",onClick:()=>t("dark"===e?"light":"dark"),title:"dark"===e?"Switch to light mode":"Switch to dark mode","aria-label":"dark"===e?"Switch to light mode":"Switch to dark mode",children:"dark"===e?a.jsx(n.Z,{className:"h-6 w-6"}):a.jsx(s.Z,{className:"h-6 w-6"})})}},91664:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var a=r(10326),n=r(17577),s=r(79360),i=r(51223);let o=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef(({className:e,variant:t,size:r,...n},s)=>a.jsx("button",{className:(0,i.cn)(o({variant:t,size:r,className:e})),ref:s,...n}));d.displayName="Button"},18069:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});let a=process.env.NEXTAUTH_URL??"";async function n(e,t){let{method:r="GET",body:n,...s}=t??{},i={...s,method:r,headers:{"Content-Type":"application/json",...s.headers},credentials:"include",...void 0!==n&&{body:JSON.stringify(n)}},o=await fetch(`${a}${e}`,i);if(!o.ok){let e=await o.json().catch(()=>({error:o.statusText})),t=Error(e.error??"Request failed");throw t.body=e,t}if(204!==o.status)return o.json()}let s={compliance:{check:e=>n("/api/compliance/check",{method:"POST",body:e})},regos:{list:()=>n("/api/regos"),create:e=>n("/api/regos",{method:"POST",body:e}),update:(e,t)=>n(`/api/regos/${e}`,{method:"PATCH",body:t}),delete:e=>n(`/api/regos/${e}`,{method:"DELETE"})},drivers:{list:()=>n("/api/drivers"),create:e=>n("/api/drivers",{method:"POST",body:e}),update:(e,t)=>n(`/api/drivers/${e}`,{method:"PATCH",body:t}),delete:e=>n(`/api/drivers/${e}`,{method:"DELETE"})},sheets:{list:()=>n("/api/sheets"),get:e=>n(`/api/sheets/${e}`),regoMaxEndKms:e=>n(`/api/rego-kms?rego=${encodeURIComponent(e)}`),create:e=>n("/api/sheets",{method:"POST",body:e}),update:(e,t)=>n(`/api/sheets/${e}`,{method:"PATCH",body:t}),delete:e=>n(`/api/sheets/${e}`,{method:"DELETE"}),exportPdfUrl:e=>`${a}/api/sheets/${e}/export`},users:{create:e=>n("/api/users",{method:"POST",body:e})}}},18775:(e,t,r)=>{"use strict";r.d(t,{nL:()=>T,eI:()=>E,r9:()=>k,Gg:()=>x,OX:()=>j,Fy:()=>P,Wn:()=>b,o_:()=>S});var a=r(18069);let n="sheets",s="sheetsList",i="regos",o="pending";function d(){return new Promise((e,t)=>{t(Error("IndexedDB only in browser"))})}function l(e,t,r="readonly"){return e.transaction(t,r).objectStore(t)}async function c(e){let t=await d();return new Promise((r,a)=>{let s=l(t,n).get(e);s.onsuccess=()=>r(s.result??null),s.onerror=()=>a(s.error)})}async function u(e){let t=await d();return new Promise((r,a)=>{let s=l(t,n,"readwrite").put(e);s.onsuccess=()=>r(),s.onerror=()=>a(s.error)})}async function h(e){let t=await d();return new Promise((r,a)=>{let s=l(t,n,"readwrite").delete(e);s.onsuccess=()=>r(),s.onerror=()=>a(s.error)})}async function m(){let e=await d();return new Promise((t,r)=>{let a=l(e,s).get("list");a.onsuccess=()=>t(a.result?.value??[]),a.onerror=()=>r(a.error)})}async function f(e){let t=await d();return new Promise((r,a)=>{let n=l(t,s,"readwrite").put({key:"list",value:e});n.onsuccess=()=>r(),n.onerror=()=>a(n.error)})}async function w(){let e=await d();return new Promise((t,r)=>{let a=l(e,i).get("regos");a.onsuccess=()=>t(a.result?.value??[]),a.onerror=()=>r(a.error)})}async function p(e){let t=await d();return new Promise((r,a)=>{let n=l(t,i,"readwrite").put({key:"regos",value:e});n.onsuccess=()=>r(),n.onerror=()=>a(n.error)})}async function g(){let e=await d();return new Promise((t,r)=>{let a=l(e,o).getAll();a.onsuccess=()=>t(a.result??[]),a.onerror=()=>r(a.error)})}async function y(e){let t=await d(),r={...e,at:Date.now()};return new Promise((e,a)=>{let n=l(t,o,"readwrite").add(r);n.onsuccess=()=>e(),n.onerror=()=>a(n.error)})}async function v(e){let t=await d();return new Promise((r,a)=>{let n=l(t,o,"readwrite").delete(e);n.onsuccess=()=>r(),n.onerror=()=>a(n.error)})}function x(){return"undefined"!=typeof navigator&&navigator.onLine}async function b(){let e;if(!x())return{synced:0};let t=await g(),r=0;for(let n of t){let t=n.id;if(null!=t)try{if("update"===n.type)await a.h.sheets.update(n.sheetId,n.data),await u(await a.h.sheets.get(n.sheetId)),await v(t),r++;else if("create"===n.type){let s=await c(n.tempId),i=s?{driver_name:s.driver_name,second_driver:s.second_driver,driver_type:s.driver_type,destination:s.destination,last_24h_break:s.last_24h_break,week_starting:s.week_starting,days:s.days,status:s.status,signature:s.signature,signed_at:s.signed_at}:n.data,o=await a.h.sheets.create(i);await u(o),await h(n.tempId);let d=(await m()).filter(e=>e.id!==n.tempId);d.push(o),await f(d),await v(t),e={tempId:n.tempId,realId:o.id},r++}}catch(t){return{synced:r,error:t instanceof Error?t.message:"Sync failed",replacedTempId:e}}}return{synced:r,replacedTempId:e}}async function k(e){if(e.startsWith("local-")){let t=await c(e);if(t)return t;throw Error("Local sheet not found.")}if(x())try{let t=await a.h.sheets.get(e);return await u(t),t}catch{let t=await c(e);if(t)return t;throw Error("Sheet not found and not available offline.")}let t=await c(e);if(t)return t;throw Error("You're offline and this sheet isn't cached. Connect to load it.")}async function P(){if(x())try{let e=await a.h.sheets.list();return await f(e),e}catch{}return m()}async function S(e,t){let r=await c(e).catch(()=>null),a=r?{...r,...t,id:e}:{...t,id:e};await u(a);let n=e.startsWith("local-");if(n||await y({type:"update",sheetId:e,data:t}),x()&&!n&&(await b()).synced>0){let t=await c(e);if(t)return t}return a}async function T(e){if(x()){let t=await a.h.sheets.create(e);await u(t);let r=await m();return await f([...r,t]),t}let t=`local-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,r={...e,id:t};await u(r);let n=await m();return await f([...n,r]),await y({type:"create",tempId:t,data:e}),r}async function j(){if(x())try{let e=await a.h.regos.list();return await p(e),e}catch{}return w()}async function E(){return(await g()).length}},51223:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(41135),n=r(31009);function s(...e){return(0,n.m6)((0,a.W)(e))}},13647:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>o});var a=r(19510);r(5023);var n=r(68570);let s=(0,n.createProxy)(String.raw`C:\Users\r_she\Documents\Fatigue app\app-next\src\components\providers.tsx#Providers`),i=(0,n.createProxy)(String.raw`C:\Users\r_she\Documents\Fatigue app\app-next\src\components\theme-toggle-in-layout.tsx#ThemeToggleInLayout`),o={title:"Driver Fatigue Log – WA",description:"WA Commercial Vehicle Fatigue Management"},d=`
(function() {
  var key = 'fatigue-theme';
  var stored = localStorage.getItem(key);
  var system = window.matchMedia('(prefers-color-scheme: dark)').matches;
  var dark = stored === 'dark' || (stored !== 'light' && system);
  if (dark) document.documentElement.classList.add('dark');
  else document.documentElement.classList.remove('dark');
})();
`;function l({children:e}){return(0,a.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[a.jsx("head",{children:a.jsx("script",{dangerouslySetInnerHTML:{__html:d}})}),a.jsx("body",{children:(0,a.jsxs)(s,{children:[a.jsx(i,{}),e]})})]})}},5023:()=>{}};